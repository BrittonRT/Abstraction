// Abstraction Builder v.1.0.8 Beta - Abstract Method © 2009-2011. "Abstraction" is a trademark of Abstract Method //
var Abstraction=(function(){function a(o,y){o=o||document.body;var p=this,z=new Hashtable(),k=new Hashtable(),d=new Hashtable(),f=new Hashtable(),c=new Hashtable(),h=new Hashtable(),v=$(o);p.parent=o;p.$=p.jquery=$(o);p.uiHidden=false;p.groupZindex=[];p.contextElem;p.contextFile;p.contextRevision;p.uiLoaded=false;p.autosave=true;p.protectedMode=true;p.version="1.0.8";p.input={ctrl:false,alt:false,shift:false};p.editorsDockable=true;p.previewsDockable=true;function b(A){if(A.keyCode==16){p.input.shift=false}if(A.keyCode==17){p.input.ctrl=false}if(A.keyCode==81){p.input.alt=false}}function q(A){if(A.keyCode==16){p.input.shift=true}if(A.keyCode==17){p.input.ctrl=true}if(A.keyCode==81){p.input.alt=true}}$window.bind("keyup",b);$window.bind("keydown",q);$window.focus();v.bind("click",function(){p.docClick()});var x=(function(){A.Inherits(Window);function A(D,F,C,E){E=E||p.desktop;var B=this;this.$=$("<div/>").attr("class","window abs-attribute-editor-ui abs-ui").css("display","none").appendTo(E);this.window=this.$.get(0);this.$wrapper=$("<div/>").css({overflow:"auto",width:"100%",height:"100%"}).addClass("content abs-ui").appendTo(this.window);this.wrapper=this.$wrapper.get(0);this.attributes={};this.name="attributeEditor";B.options({selector:this.window,title:"<div class='abs-attributeEditor-icon'></div>Editing: &lt;"+F.nodeName+"&gt;'s Attributes",taskbar:C,left:500,top:200,width:630,height:360,dragstop:B.saveUI,resizestop:B.saveUI,minimize:B.saveUI,unminimize:B.saveUI,maximize:B.saveUI,unmaximize:B.saveUI,menu:false,focus:this.onfocus});B.load(D,F);B.open();B.focus()}A.prototype.close=function(){if(this.elem){z.remove(this.elem)}if(this.state){var B=this.state.attributeEditors.length;while(B--){if(this.state.attributeEditors[B]===this){this.state.attributeEditors.splice(B,1)}}var B=this.state.winZindex.length;while(B--){if(this.state.winZindex[B]===this){this.state.winZindex.splice(B,1)}}this.state=null}this.$.unbind().empty();this.destroy()};A.prototype.blankAttribute=function(C){var B=this,F={};F.onclick=F.onmouseover=F.onmouseout=F.onload=F.onunload=F.style=function(){var G=document.createElement("textarea");$(G).css({marginBottom:"1px",width:350,height:150}).bind("keyup",function(H){var I=$(this).val();clearTimeout(B.attrTimer);B.attrTimer=setTimeout(function(){B.state.execute({fn:"editAttribute",elem:B.elem,attribute:C,content:I});I=null},500)});return G};F["default"]=function(){var G=document.createElement("input");$(G).css({margin:"0px",marginBottom:"3px",padding:"0px"}).bind("keyup",function(H){var I=$(this).val();clearTimeout(B.attrTimer);B.attrTimer=setTimeout(function(){B.state.execute({fn:"editAttribute",elem:B.elem,attribute:C,content:I});I=null},500)});return G};B.attributes[C]=true;if(typeof F[C]=="function"){var E=F[C]()}else{var E=F["default"]()}var D=document.createElement("div");$(D).css({marginLeft:10,marginTop:5});D.innerHTML="<b style='display: inline-block; width: 100px;'>"+C+"</b>";D.appendChild(E);F=null;E=null;return D};A.prototype.getAttribute=function(C){var B=this,F={};F.onclick=F.onmouseover=F.onmouseout=F.onload=F.onunload=F.style=function(){var G=document.createElement("textarea");$(G).css({marginBottom:"1px",width:350,height:150}).val(C.nodeValue.replace(/;\s*/gi,";\r")).bind("keyup",function(H){var I=$(this).val();clearTimeout(B.attrTimer);B.attrTimer=setTimeout(function(){B.state.execute({fn:"editAttribute",elem:B.elem,attribute:C.nodeName,content:I});I=null},500)});return G};F["default"]=function(){var G=document.createElement("input");$(G).css({margin:"0px",marginBottom:"3px",padding:"0px"}).val(uncacheSafe(C.nodeValue.replace(/;\s*/gi,";\r"))).bind("keyup",function(H){var I=$(this).val();clearTimeout(B.attrTimer);B.attrTimer=setTimeout(function(){B.state.execute({fn:"editAttribute",elem:B.elem,attribute:C.nodeName,content:I});I=null},500)});return G};B.attributes[C.nodeName]=true;var E;if(typeof F[C.nodeName]=="function"){var E=F[C.nodeName]()}else{var E=F["default"]()}var D=document.createElement("div");$(D).css({marginLeft:10,marginTop:10});D.innerHTML="<b style='display: inline-block; width: 100px;'>"+C.nodeName+"</b>";D.appendChild(E);F=null;E=null;return D};A.prototype.load=function(E,G){var C=this,F={},B=E.split(p.root);if(B.length>1){E=B[1]}B=E.split("/");for(var D=0;D<B.length-1;D++){if(B[D]!=""){C.currentPath+=B[D]+"/";C.returnPath+="../"}}B=E.split("?");E=B[0];if(E.charAt(0)!="/"){E="/"+E}if(C.currentDoc==undefined){C.currentDoc=uncacheSafe(E.substr(1))}else{C.lastDoc=C.currentDoc;C.currentDoc=uncacheSafe(E.substr(1))}C.file=E;C.elem=G;z.put(G,C);if(this.state){var D=this.state.attributeEditors.length;while(D--){if(this.state.attributeEditors[D]===this){this.state.attributeEditors.splice(D,1)}}}C.state=d.get(E);if(C.state==undefined){C.state=new t(E)}C.state.linkAttributeEditor(C);C.$wrapper.empty();for(D=0;D<G.attributes.length;D++){C.$wrapper.append(C.getAttribute(G.attributes[D]))}switch(G.nodeName){case"A":if(C.attributes.href==undefined){C.wrapper.appendChild(C.blankAttribute("href"))}if(C.attributes.target==undefined){C.wrapper.appendChild(C.blankAttribute("target"))}if(C.attributes.rel==undefined){C.wrapper.appendChild(C.blankAttribute("rel"))}if(C.attributes.hreflang==undefined){C.wrapper.appendChild(C.blankAttribute("hreflang"))}if(C.attributes.media==undefined){C.wrapper.appendChild(C.blankAttribute("media"))}if(C.attributes.type==undefined){C.wrapper.appendChild(C.blankAttribute("type"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"AREA":if(C.attributes.href==undefined){C.wrapper.appendChild(C.blankAttribute("href"))}if(C.attributes.shape==undefined){C.wrapper.appendChild(C.blankAttribute("shape"))}if(C.attributes.coords==undefined){C.wrapper.appendChild(C.blankAttribute("coords"))}if(C.attributes.alt==undefined){C.wrapper.appendChild(C.blankAttribute("alt"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}break;case"AUDIO":case"VIDEO":if(C.attributes.src==undefined){C.wrapper.appendChild(C.blankAttribute("src"))}if(C.attributes.controls==undefined){C.wrapper.appendChild(C.getAttribute("controls"))}if(C.attributes.preload==undefined){C.wrapper.appendChild(C.blankAttribute("preload"))}if(C.attributes.autoplay==undefined){C.wrapper.appendChild(C.blankAttribute("autoplay"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"BASE":if(C.attributes.href==undefined){C.wrapper.appendChild(C.getAttribute("href"))}if(C.attributes.target==undefined){C.wrapper.appendChild(C.blankAttribute("target"))}break;case"BDO":if(C.attributes.dir==undefined){C.wrapper.appendChild(C.blankAttribute("dir"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"BLOCKQUOTE":case"Q":if(C.attributes.cite==undefined){C.wrapper.appendChild(C.blankAttribute("cite"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"CANVAS":if(C.attributes.width==undefined){C.wrapper.appendChild(C.blankAttribute("width"))}if(C.attributes.height==undefined){C.wrapper.appendChild(C.blankAttribute("height"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"COL":case"COLGROUP":if(C.attributes.span==undefined){C.wrapper.appendChild(C.blankAttribute("span"))}if(C.attributes.align==undefined){C.wrapper.appendChild(C.blankAttribute("align"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}break;case"COMMAND":if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.name==undefined){C.wrapper.appendChild(C.blankAttribute("name"))}if(C.attributes.type==undefined){C.wrapper.appendChild(C.blankAttribute("type"))}if(C.attributes.disabled==undefined){C.wrapper.appendChild(C.blankAttribute("disabled"))}if(C.attributes.label==undefined){C.wrapper.appendChild(C.blankAttribute("label"))}if(C.attributes.icon==undefined){C.wrapper.appendChild(C.blankAttribute("icon"))}break;case"DETAILS":if(C.attributes.open==undefined){C.wrapper.appendChild(C.blankAttribute("open"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"EMBED":if(C.attributes.src==undefined){C.wrapper.appendChild(C.blankAttribute("src"))}if(C.attributes.width==undefined){C.wrapper.appendChild(C.blankAttribute("width"))}if(C.attributes.height==undefined){C.wrapper.appendChild(C.blankAttribute("height"))}if(C.attributes.wmode==undefined){C.wrapper.appendChild(C.blankAttribute("wmode"))}if(C.attributes.type==undefined){C.wrapper.appendChild(C.blankAttribute("type"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"FORM":if(C.attributes.name==undefined){C.wrapper.appendChild(C.blankAttribute("name"))}if(C.attributes.action==undefined){C.wrapper.appendChild(C.blankAttribute("action"))}if(C.attributes.method==undefined){C.wrapper.appendChild(C.blankAttribute("method"))}if(C.attributes.enctype==undefined){C.wrapper.appendChild(C.blankAttribute("enctype"))}if(C.attributes["accept-charset"]==undefined){C.wrapper.appendChild(C.blankAttribute("accept-charset"))}if(C.attributes.novalidate==undefined){C.wrapper.appendChild(C.blankAttribute("novalidate"))}if(C.attributes.target==undefined){C.wrapper.appendChild(C.blankAttribute("target"))}if(C.attributes.autocomplete==undefined){C.wrapper.appendChild(C.blankAttribute("autocomplete"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"IFRAME":if(C.attributes.src==undefined){C.wrapper.appendChild(C.blankAttribute("src"))}if(C.attributes.width==undefined){C.wrapper.appendChild(C.blankAttribute("width"))}if(C.attributes.height==undefined){C.wrapper.appendChild(C.blankAttribute("height"))}if(C.attributes.name==undefined){C.wrapper.appendChild(C.blankAttribute("name"))}if(C.attributes.sandbox==undefined){C.wrapper.appendChild(C.blankAttribute("sandbox"))}if(C.attributes.seamless==undefined){C.wrapper.appendChild(C.blankAttribute("seamless"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}break;case"IMG":if(C.attributes.src==undefined){C.wrapper.appendChild(C.blankAttribute("src"))}if(C.attributes.alt==undefined){C.wrapper.appendChild(C.blankAttribute("alt"))}if(C.attributes.title==undefined){C.wrapper.appendChild(C.blankAttribute("title"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"INPUT":if(C.attributes.name==undefined){C.wrapper.appendChild(C.blankAttribute("name"))}if(C.attributes.type==undefined){C.wrapper.appendChild(C.blankAttribute("type"))}if(C.attributes.value==undefined){C.wrapper.appendChild(C.blankAttribute("value"))}if(C.attributes.form==undefined){C.wrapper.appendChild(C.blankAttribute("form"))}if(C.attributes.disabled==undefined){C.wrapper.appendChild(C.blankAttribute("disabled"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}break;case"KEYGEN":if(C.attributes.name==undefined){C.wrapper.appendChild(C.blankAttribute("name"))}if(C.attributes.keytype==undefined){C.wrapper.appendChild(C.blankAttribute("keytype"))}if(C.attributes.autofocus==undefined){C.wrapper.appendChild(C.blankAttribute("autofocus"))}if(C.attributes.form==undefined){C.wrapper.appendChild(C.blankAttribute("form"))}if(C.attributes.challenge==undefined){C.wrapper.appendChild(C.blankAttribute("challenge"))}if(C.attributes.disabled==undefined){C.wrapper.appendChild(C.blankAttribute("disabled"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}break;case"LABEL":if(C.attributes["for"]==undefined){C.wrapper.appendChild(C.blankAttribute("for"))}if(C.attributes.form==undefined){C.wrapper.appendChild(C.blankAttribute("form"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"LI":if(C.attributes.value==undefined){C.wrapper.appendChild(C.blankAttribute("value"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"LINK":if(C.attributes.href==undefined){C.wrapper.appendChild(C.blankAttribute("href"))}if(C.attributes.rel==undefined){C.wrapper.appendChild(C.blankAttribute("rel"))}if(C.attributes.type==undefined){C.wrapper.appendChild(C.blankAttribute("type"))}if(C.attributes.hreflang==undefined){C.wrapper.appendChild(C.blankAttribute("hreflang"))}if(C.attributes.media==undefined){C.wrapper.appendChild(C.blankAttribute("media"))}if(C.attributes.sizes==undefined){C.wrapper.appendChild(C.blankAttribute("sizes"))}break;case"MENU":if(C.attributes.type==undefined){C.wrapper.appendChild(C.blankAttribute("type"))}if(C.attributes.label==undefined){C.wrapper.appendChild(C.blankAttribute("label"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}break;case"META":if(C.attributes.name==undefined){C.wrapper.appendChild(C.blankAttribute("name"))}if(C.attributes.charset==undefined){C.wrapper.appendChild(C.blankAttribute("charset"))}if(C.attributes["http-equiv"]==undefined){C.wrapper.appendChild(C.blankAttribute("http-equiv"))}if(C.attributes.content==undefined){C.wrapper.appendChild(C.blankAttribute("content"))}break;case"METER":if(C.attributes.value==undefined){C.wrapper.appendChild(C.blankAttribute("value"))}if(C.attributes.min==undefined){C.wrapper.appendChild(C.blankAttribute("min"))}if(C.attributes.low==undefined){C.wrapper.appendChild(C.blankAttribute("low"))}if(C.attributes.high==undefined){C.wrapper.appendChild(C.blankAttribute("high"))}if(C.attributes.max==undefined){C.wrapper.appendChild(C.blankAttribute("max"))}if(C.attributes.optimum==undefined){C.wrapper.appendChild(C.blankAttribute("optimum"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}break;case"OBJECT":if(C.attributes.data==undefined){C.wrapper.appendChild(C.getAttribute("data"))}if(C.attributes.width==undefined){C.wrapper.appendChild(C.getAttribute("width"))}if(C.attributes.height==undefined){C.wrapper.appendChild(C.getAttribute("height"))}if(C.attributes.name==undefined){C.wrapper.appendChild(C.getAttribute("name"))}if(C.attributes.type==undefined){C.wrapper.appendChild(C.getAttribute("type"))}if(C.attributes.form==undefined){C.wrapper.appendChild(C.blankAttribute("form"))}if(C.attributes.usemap==undefined){C.wrapper.appendChild(C.getAttribute("usemap"))}break;case"OL":if(C.attributes.type==undefined){C.wrapper.appendChild(C.blankAttribute("type"))}if(C.attributes.start==undefined){C.wrapper.appendChild(C.blankAttribute("start"))}if(C.attributes.reversed==undefined){C.wrapper.appendChild(C.blankAttribute("reversed"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"OPTGROUP":if(C.attributes.disabled==undefined){C.wrapper.appendChild(C.blankAttribute("disabled"))}if(C.attributes.label==undefined){C.wrapper.appendChild(C.blankAttribute("label"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"OPTION":if(C.attributes.value==undefined){C.wrapper.appendChild(C.blankAttribute("value"))}if(C.attributes.label==undefined){C.wrapper.appendChild(C.blankAttribute("label"))}if(C.attributes.disabled==undefined){C.wrapper.appendChild(C.blankAttribute("disabled"))}if(C.attributes.selected==undefined){C.wrapper.appendChild(C.blankAttribute("selected"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"OUTPUT":if(C.attributes.name==undefined){C.wrapper.appendChild(C.blankAttribute("name"))}if(C.attributes["for"]==undefined){C.wrapper.appendChild(C.blankAttribute("for"))}if(C.attributes.form==undefined){C.wrapper.appendChild(C.blankAttribute("form"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"PARAM":if(C.attributes.name==undefined){C.wrapper.appendChild(C.blankAttribute("name"))}if(C.attributes.value==undefined){C.wrapper.appendChild(C.blankAttribute("value"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}break;case"SCRIPT":if(C.attributes.src==undefined){C.wrapper.appendChild(C.getAttribute("src"))}if(C.attributes.type==undefined){C.wrapper.appendChild(C.getAttribute("type"))}if(C.attributes.language==undefined){C.wrapper.appendChild(C.getAttribute("language"))}if(C.attributes.defer==undefined){C.wrapper.appendChild(C.getAttribute("defer"))}if(C.attributes.async==undefined){C.wrapper.appendChild(C.getAttribute("async"))}if(C.attributes.charset==undefined){C.wrapper.appendChild(C.getAttribute("charset"))}break;case"SELECT":if(C.attributes.name==undefined){C.wrapper.appendChild(C.blankAttribute("name"))}if(C.attributes.disabled==undefined){C.wrapper.appendChild(C.blankAttribute("disabled"))}if(C.attributes.form==undefined){C.wrapper.appendChild(C.blankAttribute("form"))}if(C.attributes.multiple==undefined){C.wrapper.appendChild(C.blankAttribute("multiple"))}if(C.attributes.size==undefined){C.wrapper.appendChild(C.blankAttribute("size"))}if(C.attributes.autofocus==undefined){C.wrapper.appendChild(C.blankAttribute("autofocus"))}if(C.attributes.required==undefined){C.wrapper.appendChild(C.blankAttribute("required"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}break;case"STYLE":if(C.attributes.media==undefined){C.wrapper.appendChild(C.getAttribute("media"))}if(C.attributes.type==undefined){C.wrapper.appendChild(C.getAttribute("type"))}if(C.attributes.scoped==undefined){C.wrapper.appendChild(C.getAttribute("scoped"))}break;case"TABLE":if(C.attributes.border==undefined){C.wrapper.appendChild(C.blankAttribute("border"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"TD":if(C.attributes.colspan==undefined){C.wrapper.appendChild(C.blankAttribute("colspan"))}if(C.attributes.rowspan==undefined){C.wrapper.appendChild(C.blankAttribute("rowspan"))}if(C.attributes.headers==undefined){C.wrapper.appendChild(C.blankAttribute("headers"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"TH":if(C.attributes.colspan==undefined){C.wrapper.appendChild(C.blankAttribute("colspan"))}if(C.attributes.rowspan==undefined){C.wrapper.appendChild(C.blankAttribute("rowspan"))}if(C.attributes.headers==undefined){C.wrapper.appendChild(C.blankAttribute("headers"))}if(C.attributes.scope==undefined){C.wrapper.appendChild(C.blankAttribute("scope"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"TIME":if(C.attributes.datetime==undefined){C.wrapper.appendChild(C.blankAttribute("datetime"))}if(C.attributes.pubdate==undefined){C.wrapper.appendChild(C.blankAttribute("pubdate"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}break;case"TRACK":if(C.attributes.src==undefined){C.wrapper.appendChild(C.blankAttribute("src"))}if(C.attributes.kind==undefined){C.wrapper.appendChild(C.blankAttribute("kind"))}if(C.attributes.srclang==undefined){C.wrapper.appendChild(C.blankAttribute("srclang"))}if(C.attributes.label==undefined){C.wrapper.appendChild(C.blankAttribute("label"))}if(C.attributes["default"]==undefined){C.wrapper.appendChild(C.blankAttribute("default"))}if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}break;default:if(C.attributes["class"]==undefined){C.wrapper.appendChild(C.blankAttribute("class"))}if(C.attributes.id==undefined){C.wrapper.appendChild(C.blankAttribute("id"))}if(C.attributes.title==undefined){C.wrapper.appendChild(C.blankAttribute("title"))}if(C.attributes.style==undefined){C.wrapper.appendChild(C.blankAttribute("style"))}if(C.attributes.accesskey==undefined){C.wrapper.appendChild(C.blankAttribute("accesskey"))}if(C.attributes.contenteditable==undefined){C.wrapper.appendChild(C.blankAttribute("contenteditable"))}if(C.attributes.contextmenu==undefined){C.wrapper.appendChild(C.blankAttribute("contextmenu"))}if(C.attributes.dir==undefined){C.wrapper.appendChild(C.blankAttribute("dir"))}if(C.attributes.draggable==undefined){C.wrapper.appendChild(C.blankAttribute("draggable"))}if(C.attributes.dropzone==undefined){C.wrapper.appendChild(C.blankAttribute("dropzone"))}if(C.attributes.lang==undefined){C.wrapper.appendChild(C.blankAttribute("lang"))}if(C.attributes.spellcheck==undefined){C.wrapper.appendChild(C.blankAttribute("spellcheck"))}if(C.attributes.tabindex==undefined){C.wrapper.appendChild(C.blankAttribute("tabindex"))}break}};A.prototype.onfocus=function(){var B=this;if(p.activeState!=B.state){p.activeState=B.state;p.sourceOutline.load(B.file);p.revisionManager.load(B.file)}p.updateGroupFocus(B)};A.prototype.saveUI=function(){p.saveUI()};A.prototype.setZindex=function(){var B=this.state.winZindex.length;while(B--){if(this.state.winZindex[B]===this){this.state.winZindex.splice(B,1)}}this.state.winZindex[this.state.winZindex.length]=this};A.prototype.toggleMenu=function(){if(this.menuClosed){this.menu.$.show();this.menuClosed=false}else{this.menu.$.hide();this.menuClosed=true}};return A})();var w=(function(){function A(){var C=this,B={};C.$=$("<div/>").addClass("abs-contextMenu").attr("id","absContextMenu").css("display","none").appendTo(document.body);C.wrapper=C.$.get(0);C.target;this.name="contextMenu"}A.prototype.close=function(){var B=this;B.$.fadeOut("fast",function(){B.$.unbind().empty();B.target=undefined})};A.prototype.adminToggle=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"toggleAdmin",elem:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.copyElement=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.clipboard.push(p.contextElem);$("#absContextMenu").fadeOut("fast")};A.prototype.pasteElement=function(B){p.activeState.execute({fn:"pasteElem",elem:p.activeState.clipboard[$(this).attr("id").substr(3)],dest:p.contextElem})};A.prototype.clearClipboard=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.clipboard=[];$("#absContextMenu").fadeOut("fast")};A.prototype.clearFileClipboard=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.fileManager.clipboard=[];$("#absContextMenu").fadeOut("fast")};A.prototype.positionElemRel=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"posElem",pos:"relative",elem:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.positionElemAbs=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"posElem",pos:"absolute",elem:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.positionElemFix=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"posElem",pos:"fixed",elem:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.editElemSize=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"resizeElem",elem:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.editElemText=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}if($(p.contextElem).is("article, aside, b, blockquote, caption, cite, center, dd, div, dl, dt, em, fieldset, figcaption, footer, form, h1, h2, h3, h4, h5, h6, header, i, legend, li, ruby, s, strong, summary, td, th, p, q, section, span, u")){p.activeState.wysiwygFrame.set(p.contextElem)}$("#absContextMenu").fadeOut("fast")};A.prototype.editElemImage=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.setImage(p.contextElem);$("#absContextMenu").fadeOut("fast")};A.prototype.editElemStyles=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}new r(p.activeState.file,p.contextElem,"style",p.taskbar);$("#absContextMenu").fadeOut("fast")};A.prototype.editElemAttr=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}new x(p.activeState.file,p.contextElem,p.taskbar);$("#absContextMenu").fadeOut("fast")};A.prototype.editElemHTML=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}new r(p.activeState.file,p.contextElem,"html",p.taskbar);$("#absContextMenu").fadeOut("fast")};A.prototype.editDocHTML=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}if(c.get(p.activeState.file)==undefined){new n(p.activeState.file,p.taskbar)}$("#absContextMenu").fadeOut("fast")};A.prototype.createElemA=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"a",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemArticle=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"article",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemArea=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"area",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemAside=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"aside",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemAudio=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"audio",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemBase=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"base",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemCanvas=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"canvas",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemCaption=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"caption",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemCol=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"col",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemCommand=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"command",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemDD=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"dd",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemDetails=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"details",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemDiv=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"div",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemDL=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"dl",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemDT=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"dt",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemEmbed=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"embed",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemFieldset=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"fieldset",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemFigCaption=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"figcaption",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemFigure=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"figure",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemFooter=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"footer",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemForm=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"form",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemH1=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"h1",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemH2=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"h2",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemH3=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"h3",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemH4=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"h4",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemH5=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"h5",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemH6=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"h6",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemHeader=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"header",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemHgroup=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"hgroup",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemImg=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"img",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemInput=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"input",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemLabel=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"label",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemLegend=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"legend",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemLI=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"li",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemLink=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"link",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemMap=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"map",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemMenu=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"menu",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemNav=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"nav",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemNoScript=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"noscript",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemObject=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"object",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemOL=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"ol",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemP=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"p",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemParam=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"param",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemRP=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"rp",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemSection=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"section",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemSource=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"source",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemStyle=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"style",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemSummary=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"summary",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemTable=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"table",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemTD=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"td",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemTfoot=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"tfoot",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemThead=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"th",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemTrow=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"tr",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemUL=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"ul",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemVideo=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"video",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createElemRT=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"createElem",elem:"rt",parent:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.deleteElement=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.activeState.execute({fn:"deleteElem",elem:p.contextElem});$("#absContextMenu").fadeOut("fast")};A.prototype.createNewCSS=function(D){D=window.event||D;if(D.stopPropagation){D.stopPropagation()}else{D.cancelBubble=true}var C='<form><fieldset style=\'margin: 10px;\'><label for="nameStylesheet">Enter a name for your new Stylesheet:</label><input class="text_input" name="nameStylesheet" id="nameStylesheet" type="text" /><input class="button" id="nameStylesheetSubmit" type="submit" value="submit" /></fieldset></form>';new Popup({id:"nameFilePopup",content:C,title:"Name Stylesheet",position:"average"});$("#nameFilePopup").find("form").submit(B).find("input")[0].focus();function B(){var E=document.getElementById("nameStylesheet").value.split(".css",1);E+=".css";var G=document.createElement("link");G.setAttribute("rel","stylesheet");G.setAttribute("type","text/css");G.setAttribute("href",p.activeState.returnPath+"styles/"+E);var F=p.activeState.frame.contentWindow.document;F.getElementsByTagName("head")[0].appendChild(G);p.activeState.add(G,p.activeState.elementHash.get(F.getElementsByTagName("head")[0]));p.setFileContents(p.activeState.workingDoc,p.activeState.html(),function(){});p.setFileContents("/styles/"+E,"",function(){},false);p.sourceOutline.update();if(c.get("/styles/"+E)==undefined){new n("/styles/"+E,p.taskbar)}$("#nameFilePopup").fadeOut("fast",function(){$(this).empty().remove()});p.fileManager.update();return false}$("#absContextMenu").fadeOut("fast")};A.prototype.createNewJS=function(D){D=window.event||D;if(D.stopPropagation){D.stopPropagation()}else{D.cancelBubble=true}var C='<form><fieldset style=\'margin: 10px;\'><label for="nameStylesheet">Enter a name for your new Script:</label><input class="text_input" name="nameScript" id="nameScript" type="text" /><input class="button" id="nameScriptSubmit" type="submit" value="submit" /></fieldset></form>';new Popup({id:"nameFilePopup",content:C,title:"Name Script",position:"average"});document.getElementById("nameScriptSubmit").onclick=B;$("#nameFilePopup").find("form").submit(B).find("input")[0].focus();function B(){var E=document.getElementById("nameScript").value.split(".js",1);E+=".js";var G=document.createElement("script");G.setAttribute("type","text/javascript");G.setAttribute("src",p.activeState.returnPath+"scripts/"+E);var F=p.activeState.frame.contentWindow.document;F.getElementsByTagName("head")[0].appendChild(G);p.activeState.add(G,p.activeState.elementHash.get(F.getElementsByTagName("head")[0]));p.setFileContents(p.activeState.workingDoc,p.activeState.html(),function(){});p.setFileContents("/scripts/"+E,"",function(){},false);p.sourceOutline.update();if(c.get("/scripts/"+E)==undefined){new n("/scripts/"+E,p.taskbar)}$("#nameFilePopup").fadeOut("fast",function(){$(this).empty().remove()});p.fileManager.update();return false}$("#absContextMenu").fadeOut("fast")};A.prototype.undoAction=function(B){p.activeState.undo(p.activeState.history.pop())};A.prototype.redoAction=function(B){p.activeState.execute(p.activeState.redoHistory.pop())};A.prototype.parentClick=function(D){D=window.event||D;if(D.stopPropagation){D.stopPropagation()}else{D.cancelBubble=true}var C=parseInt($(this).attr("id").replace("lvl",""));var B=p.contextElem;while(C>0){B=$(B).parent().get(0);C--}p.contextMenu.element(B,p.activeState);p.activeState.preview.$selector.fadeOut("fast")};A.prototype.parentMouseover=function(E){var D=parseInt($(this).attr("id").replace("lvl",""));var C=p.contextElem;while(D--){C=$(C).parent().get(0)}var B=(navigator.userAgent.indexOf("Firefox")!=-1)?$(p.activeState.frame.contentWindow.document).find("html,body").scrollTop():$(p.activeState.frame.contentWindow.document).find("body").scrollTop();p.activeState.preview.$selector.css("display","block").dequeue().animate({top:$(C).offset().top-B,left:$(C).offset().left,width:$(C).outerWidth(),height:$(C).outerHeight(),opacity:0.5},"fast");C=null};A.prototype.parentWrapperMouseout=function(){p.activeState.preview.$selector.fadeOut("fast")};A.prototype.editScript=function(D){D=window.event||D;if(D.stopPropagation){D.stopPropagation()}else{D.cancelBubble=true}var B=$(this).attr("class"),B=B.split(" ")[0],C=B.split("?")[0];if(c.get(C)==undefined){new n(B,p.taskbar)}$("#absContextMenu").fadeOut("fast")};A.prototype.editStylesheet=function(D){D=window.event||D;if(D.stopPropagation){D.stopPropagation()}else{D.cancelBubble=true}var B=$(this).attr("class"),B=B.split(" ")[0],C=B.split("?")[0];if(c.get(C)==undefined){new n(B,p.taskbar)}$("#absContextMenu").fadeOut("fast")};A.prototype.editInlineScript=function(C){C=window.event||C;if(C.stopPropagation){C.stopPropagation()}else{C.cancelBubble=true}var D=parseInt($(this).attr("id").replace("lvl",""));var B=p.activeState.scriptRefs[D];new r(desktop,B,"html",$(B).html(),taskbar);$("#absContextMenu").fadeOut("fast")};A.prototype.editInlineStylesheet=function(C){C=window.event||C;if(C.stopPropagation){C.stopPropagation()}else{C.cancelBubble=true}var D=parseInt($(this).attr("id").replace("lvl",""));var B=p.activeState.scriptRefs[D];new r(desktop,B,"html",$(B).html(),taskbar);$("#absContextMenu").fadeOut("fast")};A.prototype.selectScript=function(C){C=window.event||C;if(C.stopPropagation){C.stopPropagation()}else{C.cancelBubble=true}var D=parseInt($(this).attr("id").replace("lvl",""));var B=p.activeState.scriptRefs[D];$("#absContextMenu").fadeOut("fast")};A.prototype.setTooltip=function(){$("#absTooltip").remove();if($(this).attr("alt")!==undefined){var C=$("<div/>").attr({id:"absTooltip",style:"position: absolute; top: -1px;",}).html($(this).attr("alt")).appendTo(this);if($(this).find(".absSubmenu").length==0){if($("#absContextMenu").offset().left>$(window).width()*0.85){var B=-20-C.width()}else{var B=$(this).parent().width()+10}}else{if($("#absContextMenu").offset().left>$(window).width()*0.9){var B=-$(this).find("div").width()-C.width()-21}else{var B=$(this).find("div").width()+$(this).parent().width()+11}}C.css("left",B)}};A.prototype.newFile=function(){var D='<form><fieldset style="margin: 10px;"><label for="nameFile">Enter a name for your new file:</label><input class="text_input" name="nameFile" id="nameFile" type="text" /><select id="fileExtensionSelect"><option value="css">.css</option><option value="html">.html</option><option value="js">.js</option><option value="pl">.pl</option><option value="php">.php</option><option value="txt">.txt</option><option value="xml">.xml</option></select><input class="button" id="nameFileSubmit" type="submit" value="submit" /></fieldset></form>';new Popup({id:"nameFilePopup",content:D,title:"Name Document",position:"average"});$("#nameFilePopup").find("form").submit(C).find("input")[0].focus();document.getElementById("nameFile").onkeyup=B;function C(){p.fileManager.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");var E=document.getElementById("nameFile").value,J=E.split("."),L;if(J.length==1){L=document.getElementById("fileExtensionSelect").value;E=J[0]+"."+L}else{L=J[0]}switch(L.toLowerCase()){case"html":case"htm":var G='<!DOCTYPE html>\n<html lang="en">\n\t<head>\n\t\t<meta charset="utf-8">\n\t\t<title>title</title>\n\t</head>\n\t<body>\n\t</body>\n</html>';break;default:var G="";break}var K=(p.contextFile=="/"||p.contextFile=="")?"/":p.contextFile+"/";var H=p.contextFile.split(".");if(H.length>1){H=H[0].split("/");K="";var I=H.length-1;var F=0;while(F<I){K+=H[F]+"/";F++}}p.setFileContents(K+E,G,function(P){if(P!==false){var M=getFileType(K+E),N=(M=="html"||M=="htm"||M=="php")?true:false,O=(K=="/")?$("#absFileManagerWrapper"):$(document.getElementById(K.slice(0,-1))).next();if(N&&k.get(K+E)==undefined){new u(K+E,p.taskbar)}if(c.get(K+E)==undefined){new n(K+E,p.taskbar)}if(P!="exists"&&O.css("display")!="none"){p.fileManager.generateFileItem(K,E,O)}p.fileManager.$handle.find(".open-menu").css("background","")}},false);$("#nameFilePopup").fadeOut("fast",function(){$(this).empty().remove()});return false}function B(){var E=document.getElementById("nameFile").value;newNameArr=E.split(".");if(newNameArr.length>1){document.getElementById("fileExtensionSelect").disabled="disabled"}else{document.getElementById("fileExtensionSelect").disabled=undefined}}};A.prototype.newDirectory=function(){var B='<form><fieldset style="margin: 10px;"><label for="nameDir">Enter a name for your new directory:</label><input class="text_input" name="nameDir" id="nameDir" type="text" /><input class="button" id="nameDirSubmit" type="submit" value="submit" /></fieldset></form>';new Popup({id:"nameFilePopup",content:B,title:"Name Directory",position:"average"});$("#nameFilePopup").find("form").submit(C).find("input")[0].focus();function C(){p.fileManager.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");var D=document.getElementById("nameDir").value;var H=(p.contextFile=="/"||p.contextFile=="")?"/":p.contextFile+"/";var F=p.contextFile.split(".");if(F.length>1){F=F[0].split("/");H="";var G=F.length-1;var E=0;while(E<G){H+=F[E]+"/";E++}}p.createDir(H+D,function(I){parentChildWrapper=(H=="/")?$("#absFileManagerWrapper"):$(document.getElementById(H.slice(0,-1))).next();if(I!==false&&parentChildWrapper.css("display")!="none"){p.fileManager.generateFileItem(H,D,parentChildWrapper)}p.fileManager.$handle.find(".open-menu").css("background","")});$("#nameFilePopup").fadeOut("fast",function(){$(this).empty().remove()});return false}};A.prototype.uploadFile=function(){if($("#uploadFilePopup").length==0){var G=(p.contextFile=="/"||p.contextFile=="")?"/":p.contextFile+"/";var E=p.contextFile.split(".");if(E.length>1){E=E[0].split("/");G="";var F=E.length-1;var D=0;while(D<F){G+=E[D]+"/";D++}}var C='<form id="image_upload_form" method="post" enctype="multipart/form-data" style="margin: 10px; margin-bottom: 0px;" action="scripts/server/upload.php?path='+G+'"><fieldset><label for="upload_image">Select File to Upload:</label><br /><input class="text_input" name="upload_image" id="upload_image" type="file" /><input class="button" name="insert_image_submit" type="submit" value="submit" /></fieldset><iframe id="upload_iframe" name="upload_iframe" src="" style="width: 100%; height: 100px; border: 0px solid #fff; margin: 0;"></iframe></form>';new Popup({id:"uploadFilePopup",content:C,title:"Select a File",position:"average"});document.getElementById("image_upload_form").onsubmit=function(){p.fileManager.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");document.getElementById("image_upload_form").target="upload_iframe";document.getElementById("upload_iframe").onload=B};function B(){parentChildWrapper=(G=="/")?$("#absFileManagerWrapper"):$(document.getElementById(G.slice(0,-1))).next(),file=document.getElementById("upload_iframe").contentWindow.document.body.innerHTML,newName=file.split("/");newName=newName[newName.length-1];if(file!="false"&&parentChildWrapper.css("display")!="none"){p.fileManager.generateFileItem(G,newName,parentChildWrapper)}p.fileManager.$handle.find(".open-menu").css("background","");$("#uploadFilePopup").fadeOut("fast",function(){$(this).empty().remove()})}}};A.prototype.editFile=function(E){E=window.event||E;if(E.stopPropagation){E.stopPropagation()}else{E.cancelBubble=true}var D=p.contextFile.split("?")[0],B=getFileType(D),C=(B=="html"||B=="htm"||B=="php")?true:false;if(C&&k.get(D)==undefined){new u(p.contextFile,p.taskbar)}if(c.get(D)==undefined){new n(p.contextFile,p.taskbar)}$("#absContextMenu").fadeOut("fast")};A.prototype.copyFile=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.fileManager.clipboard.push(p.contextFile);$("#absContextMenu").fadeOut("fast")};A.prototype.copyFiles=function(C){C=window.event||C;if(C.stopPropagation){C.stopPropagation()}else{C.cancelBubble=true}var B=p.fileManager.selection.length;while(B--){p.fileManager.clipboard.push(p.fileManager.selection[B])}p.fileManager.selection=[];$("#absContextMenu").fadeOut("fast")};A.prototype.pasteFile=function(F){F=window.event||F;if(F.stopPropagation){F.stopPropagation()}else{F.cancelBubble=true}p.fileManager.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");var G=p.contextFile+"/";var D=p.contextFile.split(".");if(D.length>1){D=D[0].split("/");G="";var E=D.length-1;var C=0;while(C<E){G+=D[C]+"/";C++}}var B=p.fileManager.clipboard[$(this).attr("id").substr(3)].slice(1);p.copyFile(p.fileManager.clipboard[$(this).attr("id").substr(3)],G,function(I){var H=$(document.getElementById(G.slice(0,-1))).next();if(I!==false&&H.css("display")!="none"){p.fileManager.generateFileItem(G,B,H)}p.fileManager.$handle.find(".open-menu").css("background","")});$("#absContextMenu").fadeOut("fast")};A.prototype.pasteFiles=function(D){D=window.event||D;if(D.stopPropagation){D.stopPropagation()}else{D.cancelBubble=true}p.fileManager.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");var B=p.fileManager.selection.length,F=function(){};while(B--){var E=p.fileManager.selection[B]+"/";var C=p.fileManager.selection[B].split(".");if(!B){F=function(H){var G=$(document.getElementById(E.slice(0,-1))).next();if(H!==false&&G.css("display")!="none"){p.fileManager.generateFileItem(E,newName,G)}p.fileManager.$handle.find(".open-menu").css("background","");p.fileManager.selection=[]}}if(C.length=1){p.copyFile(p.fileManager.clipboard[$(this).attr("id").substr(3)],E,F)}}$("#absContextMenu").fadeOut("fast")};A.prototype.renameFile=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.fileManager.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");p.renameFile(p.contextFile,function(F,C,E){var D=$(document.getElementById(p.contextFile));D.contents().eq(1).wrap("<span />").parent().text(C).contents().unwrap();D.attr("id",E+C);p.fileManager.$handle.find(".open-menu").css("background","")});$("#absContextMenu").fadeOut("fast")};A.prototype.deleteFile=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.fileManager.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");p.deleteFile(p.contextFile,function(D){var C=$(document.getElementById(p.contextFile));if(D!==false){C.next(".abs-child-wrapper").empty().remove();C.empty().remove();if(d.get(p.contextFile)){d.get(p.contextFile).destroy()}}p.fileManager.$handle.find(".open-menu").css("background","")});$("#absContextMenu").fadeOut("fast")};A.prototype.deleteFiles=function(D){D=window.event||D;if(D.stopPropagation){D.stopPropagation()}else{D.cancelBubble=true}var C=p.fileManager.selection.length,E=function(){};while(C--){p.fileManager.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");if(!C){E=function(F){p.fileManager.$handle.find(".open-menu").css("background","");p.fileManager.selection=[]}}p.deleteFile(p.fileManager.selection[C],E);var B=$(document.getElementById(p.fileManager.selection[C]));B.next(".abs-child-wrapper").empty().remove();B.empty().remove();if(d.get(p.fileManager.selection[C])){d.get(p.fileManager.selection[C]).destroy()}}$("#absContextMenu").fadeOut("fast")};A.prototype.createRevision=function(F){p.revisionManager.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");if(p.contextRevision=="none"||p.contextRevision==undefined){p.activeState.save()}else{var C=p.activeState.html(),G=p.contextRevision+"/",D=G.split(".");if(D.length>1){D=D[0].split("/");var E=D.length-1,B=0;G="";while(B<E){G+=D[B]+"/";B++}}p.setFileContents(p.activeState.file,C,function(){p.activeState.saved=true;p.activeState.saveRevision(p.activeState.file,C,G)})}$("#absContextMenu").fadeOut("fast")};A.prototype.createRevDir=function(C){var B='<form><fieldset style="margin: 10px;"><label for="nameRevDir">Enter a name for your new directory:</label><input class="text_input" name="nameRevDir" id="nameRevDir" type="text" /><input class="button" id="nameRevDirSubmit" type="submit" value="submit" /></fieldset></form>';new Popup({id:"nameRevisionPopup",content:B,title:"Name Directory",position:"average"});$("#nameRevisionPopup").children("form").submit(function(){p.revisionManager.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");var H="/",D=document.getElementById("nameRevDir").value;if(p.contextRevision!="none"){H=p.contextRevision+"/";var F=H.split(".");if(F.length>1){F=F[0].split("/");var G=F.length-1,E=0;H="";while(E<G){H+=F[E]+"/";E++}}}p.createRevDir(D,p.activeState.currentDoc.replace(/-/gi,"-!@h@!-").replace(/\//gi,"-!@s@!-").replace(/\./gi,"-!@p@!-")+H,function(){p.revisionManager.update()});$("#nameRevisionPopup").fadeOut("fast",function(){$(this).empty().remove()});return false}).find("input")[0].focus();$("#absContextMenu").fadeOut("fast")};A.prototype.loadDirectory=function(C){var B=$(this).attr("id");if($(this).next().css("display")=="none"){$(this).next().slideDown("fast");$(this).find(".abs-toggle").attr("src","styles/images/hidechildren.png");p.revisionManager.directories[B]=true}else{$(this).next().slideUp("fast");$(this).find(".abs-toggle").attr("src","styles/images/showchildren.png");p.revisionManager.directories[B]=false}$("#absContextMenu").fadeOut("fast")};A.prototype.renameDirectory=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.revisionManager.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");p.renameRevDir("/builder/backups/"+p.activeState.currentDoc.replace(/-/gi,"-!@h@!-").replace(/\//gi,"-!@s@!-").replace(/\./gi,"-!@p@!-")+p.contextRevision,function(){p.revisionManager.update()});$("#absContextMenu").fadeOut("fast")};A.prototype.loadRevision=function(C){var B=p.activeState;B.editor.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");p.getFileContents("/builder/backups/"+p.activeState.currentDoc.replace(/-/gi,"-!@h@!-").replace(/\//gi,"-!@s@!-").replace(/\./gi,"-!@p@!-")+p.contextRevision,function(D){p.setFileContents(encodeURIComponent(p.activeState.workingDoc),D,function(){B.getServerSideScripts(D);B.getDoctype(D);B.source=D;B.update(function(){if(B.editor){B.editor.update()}B.editor.$handle.find(".open-menu").css("background","");B=null})})});$("#absContextMenu").fadeOut("fast")};A.prototype.renameRevision=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.revisionManager.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");p.renameRevision("/builder/backups/"+p.activeState.currentDoc.replace(/-/gi,"-!@h@!-").replace(/\//gi,"-!@s@!-").replace(/\./gi,"-!@p@!-")+p.contextRevision,function(){p.revisionManager.update()});$("#absContextMenu").fadeOut("fast")};A.prototype.deleteRevision=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}p.revisionManager.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");p.deleteFile("/builder/backups/"+p.activeState.currentDoc.replace(/-/gi,"-!@h@!-").replace(/\//gi,"-!@s@!-").replace(/\./gi,"-!@p@!-")+p.contextRevision,function(){p.revisionManager.update()});$("#absContextMenu").fadeOut("fast")};A.prototype.deleteRevisions=function(C){C=window.event||C;if(C.stopPropagation){C.stopPropagation()}else{C.cancelBubble=true}var B=p.revisionManager.selection.length,D=function(){};while(B--){p.revisionManager.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");if(!B){D=function(){p.revisionManager.update();p.revisionManager.selection=[]}}p.deleteFile("/builder/backups/"+p.activeState.currentDoc.replace(/-/gi,"-!@h@!-").replace(/\//gi,"-!@s@!-").replace(/\./gi,"-!@p@!-")+p.revisionManager.selection[B],D)}$("#absContextMenu").fadeOut("fast")};A.prototype.database=function(B,D){var C=this,F="",E={};E.sqlHost=function(){F+="sqlhost"};E.database=function(){F+="database"};E.table=function(){F+="table"};E.column=function(){F+="column"};E.field=function(){F+="field"};E.none=function(){F+="none"};if(typeof E[D]=="function"){E[D]();E={}}else{E={};return false}C.$.empty().html(F);C.$.find("div").hover(C.submenuMouseover,C.submenuMouseout);$("#absTableSomethingWonk").bind("click",C.adminToggle);$("#absContextMenu div:not(.absSubmenu)").bind("mouseenter",C.setTooltip);return true};A.prototype.element=function(X,H){var ad=this,D="";if($(X).is("html")){X=H.frame.contentWindow.document.body}p.activeState=H;p.contextElem=X;ad.target=H;var Z="",N='<div style="color: gray;" alt="There are no elements in your clipboard"><span class="abs-menu-paste"></span>Paste</div>',ac='<div style="color: gray;" alt="There are no actions to undo"><span class="abs-menu-undo"></span>Undo</div>',O='<div style="color: gray;" alt="There are no actions to redo"><span class="abs-menu-redo"></span>Redo</div>',L=($(X).hasClass("abs-administrable-element"))?'<div alt="Turn off administration for this element" id="absToggleAdmin"><span class="abs-menu-adminOff"></span>Admin</div>':'<div alt="Turn on administration for this element" id="absToggleAdmin"><span class="abs-menu-adminOn"></span>Admin</div>',M="",E={},C=0;var Q='<div><span class="abs-menu-delete"></span>Delete<div class="absSubmenu"><div id="absDelete" alt="Delete this item?" style="color:pink">Confirm</div></div></div>';var P='<div id="absSaveDoc" alt="Save this document?"><span class="abs-menu-save"></span>Save<div class="absSubmenu"><div style="color:#90EE90">Confirm</div></div></div>';var Y='<div id="absCreateDiv" alt="Add a Division">Container<div class="absSubmenu"><div id="absCreateArticle" alt="Add an Article tag* - HTML5">Article</div><div id="absCreateAside" alt="Add an Aside tag* - HTML5">Aside</div><div id="absCreateCanvas" alt="Add a Canvas tag* - HTML5">Canvas</div><div id="absCreateDeta" alt="Add a Details tag* - HTML5">Details</div><div id="absCreateDiv" alt="Add a Division">DIV</div><div id="absCreateFooter" alt="Add a Footer* - HTML5">Footer</div><div id="absCreateHeader" alt="Add a Header* - HTML5">Header</div><div id="absCreateNav" alt="Add Navigation links* - HTML5">Nav</div><div id="absCreateSection" alt="Add a Section* - HTML5">Section</div></div></div><hr />';var U='<div id="absElemAttr" alt="Edit the tag\'s attributes">Attributes</div><div id="absEditInnerHTML" alt="Edit the tag\'s inner html">Html</div>';var B='<div id="absEditStyles" alt="Edit the tag\'s inline style">Styles</div><hr /><div id="absEditEvents" alt="Edit the tag\'s events">Events</div>';var K='<div alt="Create a list">List<div class="absSubmenu"><div id="absCreateMenu" alt="Add Menu List* - HTML4+">Menu</div><div id="absCreateDL" alt="Add a Definition List">Definition List</div><div id="absCreateOL" alt="Add an ordered list">Ordered</div><div id="absCreateUL" alt="Add an unordered list">Unordered</div></div></div>';var S='<div id="absCreateImg" alt="Add an image">Image</div><div>Media<div class="absSubmenu"><div id="absCreateAudio" alt="Add a HTML Audio player* - HTML5">Audio</div><div id="absCreateFigure" alt="Add a Figure* - HTML5">Figure</div><div id="absCreateObject" alt="Embed a Flash Video or Javascript Object">Embed</div><div id="absCreateVideo" alt="Add a HTML Video player* - HTML5">Video</div></div></div>';var T='<div alt="Edit the tag\'s position">Position<div class="absSubmenu"><div id="absPosRel" alt="Relative to its normal position">Relative</div><div id="absPosAbs" alt="Relative to its ancestor">Absolute</div><div id="absPosFix" alt="Relative to the browser window">Fixed</div></div></div>';var G='<div id="absEditStyles" alt="Edit the tag\'s inline style">Styles</div><hr /><div id="absEditEvents" alt="Edit the tag\'s events">Events</div>';var I='<div id="absCreateHgroup" alt="Add a Header Group">Hgroup</div><div id="absCreateP" alt="Add a paragraph">Paragraph</div>';var R='<div>Text Header<div class="absSubmenu"><div id="absCreateH1" alt="Add a h1">H1</div><div id="absCreateH2" alt="Add a h2">H2</div><div id="absCreateH3" alt="Add a h3">H3</div><div id="absCreateH4" alt="Add a h4">H4</div><div id="absCreateH5" alt="Add a h5">H5</div><div id="absCreateH6" alt="Add a h6">H6</div></div></div>';if(H.clipboard.length>=1){N='<div><span class="abs-menu-paste"></span>Paste<div class="absSubmenu">';for(var V in H.clipboard){N+='<div class="absElemPaste" id="lvl'+V+'" alt="Copy '+H.clipboard[V].nodeName+' to this element">'+H.clipboard[V].nodeName+"</div>"}N+='<div id="absClipboardClear" alt="Clear the clipboard">Clear</div></div></div>'}if(H.history.length>=1){ac='<div id="absUndoAct"><span class="abs-menu-undo"></span>Undo</div>'}if(H.redoHistory.length>=1){}var ab="<hr />"+P+ac+O+"<hr />"+L;if(!$(X).is("html, body, head, style, script, meta, link, title")){var J=1;Z+="<div><span class='abs-menu-parents'></span>Parents<div class='absSubmenu'>";Z+='<div id="lvl1" class="absSelParent" alt="Select this element\'s parent element">&lt;'+$(X).parent().get(0).nodeName+"&gt;</div>";var aa=X;while(!$(aa).parent().is("body, head")){J++;Z+='<div id="lvl'+J+';" class="absSelParent" alt="Select this element\'s ancestor element">&lt;'+$(aa).parent().parent().get(0).nodeName+"&gt;</div>";aa=$(aa).parent().get(0)}Z+="</div></div>"}D="<h1>&lt;"+X.nodeName+"&gt;</h1>";if(!H.php.length&&!p.protectedMode){E.BODY=function(){var af="";var ae="";H.$frame.contents().find("link:not(.abs-ui), style").each(function(){if($(this).attr("href")==undefined){}else{var ah=$(H.elementHash.get(this)).attr("href").split("/");ah=uncacheSafe(ah[ah.length-1]);var ai=uncacheSafe($(H.elementHash.get(this)).attr("href"));var ag=ai.split(p.root);if(ag.length>1){ai=ag[1]}if(ai.charAt(0)!="/"){ai="/"+ai}af+='<div alt="Edit this stylesheet" class="'+ai+' absSelStylesheet">'+ah+"</div>"}});af+='<div id="absNewCss" alt="Add a stylesheet">New&nbsp;Stylesheet</div>';H.$frame.contents().find("script:not(.abs-ui)").each(function(){if($(this).attr("src")==undefined){ae+='<div id="lvl'+C+'" class="absInlineScript" alt="Edit this script">inline script</div>';H.scriptRefs[C]=this;C++}else{var ai=$(H.elementHash.get(this)).attr("src").split("/");ai=uncacheSafe(ai[ai.length-1]);var ah=uncacheSafe($(H.elementHash.get(this)).attr("src"));var ag=ah.split(p.root);if(ag.length>1){ah=ag[1]}if(ah.charAt(0)!="/"){ah="/"+ah}ae+='<div alt="Edit this script" class="'+ah+' absSelScript">'+ai+"</div>"}});ae+='<div id="absNewJs" alt="Add a script">New&nbsp;Script</div>';D+='<div><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+'</div></div><div><span class="abs-menu-insert"></span>Insert<div class="absSubmenu">'+Y+I+R+"<hr />"+S+'<hr /><div id="absCreateForm" alt="Add a Form">Form</div>'+K+'<div id="absCreateTable" alt="Add a table">Table</div></div></div>'+N+'<hr /><div><span class="abs-menu-css"></span>Stylesheets<div class="absSubmenu">'+af+'</div></div><div><span class="abs-menu-scripts"></span>Scripts<div class="absSubmenu">'+ae+"</div></div><hr />"+P+ac+O+"<hr />"+L};E.HEAD=function(){D+='<div><span class="abs-menu-insert"></span>Insert<div class="absSubmenu"><div id="absCreateBase" alt="Specify a base URL for the page">Base</div><div id="absNewCss" alt="Add a stylesheet to the document">Stylesheet</div><div id="absNewJs" alt="Add a script to the document">Script</div><div id="absCreateNoScript" alt="Alternate content when scripts are disabled">NoScript</div></div></div>'+ab};E.SCRIPT=function(){if($(X).attr("src")!=undefined){var ag=$(X).attr("src").split("/");ag=uncacheSafe(ag[ag.length-1]);var af=uncacheSafe(X.src);var ae=af.split(p.root);if(ae.length>1){af=ae[1]}D+='<div alt="Edit this script" class="'+af+' absSelScript"><span class="abs-menu-edit"></span>Edit</div>'+Q+ab}else{D+='<div alt="Edit this script" id="lvl'+C+'" class="absInlineScript"><span class="abs-menu-edit"></span>Edit</div>'+Q+ab;scriptRefs[C]=X;C++}};E.META=function(){D+='<div><span class="abs-menu-edit"></span>Edit<div class="absSubmenu"><div id="absElemAttr" alt="Edit the tag\'s attributes">Attributes</div></div></div>'+Q+ab};E.TITLE=function(){D+='<div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+"</div></div>"+ab};E.LINK=E.STYLE=function(){if($(X).attr("src")!=undefined){var af=$(X).attr("src").split("/");af=uncacheSafe(af[af.length-1]);var ag=uncacheSafe(X.src);var ae=ag.split(p.root);if(ae.length>1){ag=ae[1]}D+='<div alt="Edit this stylesheet" class="'+ag+' absSelStylesheet"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu"><div id="absElemAttr" alt="Edit the tag\'s attributes">Attributes</div></div></div>'+Q+ab}else{if($(X).attr("href")!=undefined){var af=$(X).attr("href").split("/");af=uncacheSafe(af[af.length-1]);var ag=uncacheSafe(X.href);var ae=ag.split(p.root);if(ae.length>1){ag=ae[1]}D+='<div alt="Edit this stylesheet" class="'+ag+' absSelStylesheet"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu"><div id="absElemAttr" alt="Edit the tag\'s attributes">Attributes</div></div></div>'+Q+ab}else{D+='<div alt="Edit this stylesheet" id="lvl'+C+'" class="absInlineStylesheet"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+"</div></div>"+L+Q+ab;scriptRefs[C]=X;C++}}};E.A=E.ARTICLE=E.ASIDE=E.BLOCKQUOTE=E.CAPTION=E.DD=E.DIV=E.LI=E.SECTION=E.TD=function(){D+='<div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+G+'</div></div><div><span class="abs-menu-insert"></span>Insert<div class="absSubmenu">'+Y+I+R+"<hr />"+S+"<hr />"+K+'<div id="absCreateForm" alt="Add a Form">Form</div><div id="absCreateTable" alt="Add a Table">Table</div></div></div>'+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.ABBR=E.ACRONYM=E.ADDRESS=E.B=E.BDI=E.BDO=E.BIG=E.CENTER=E.CITE=E.CODE=E.DEL=E.DFN=E.EM=E.FIGCAPTION=E.FONT=E.H1=E.H2=E.H3=E.H4=E.H5=E.H6=E.I=E.INPUT=E.INS=E.KBD=E.LEGEND=E.MARK=E.METER=E.OUTPUT=E.P=E.PROGRESS=E.PRE=E.Q=E.RP=E.S=E.SAMP=E.STRIKE=E.STRONG=E.SUP=E.SUB=E.SMALL=E.SUMMARY=E.TEXTAREA=E.TH=E.TIME=E.TT=E.U=E.VAR=E.XMP=function(){D+='<div id="absEditText"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+G+"</div></div>"+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.APPLET=E.BUTTON=E.TITLE=function(){D+='<div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+"</div></div>"+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.AREA=E.BASE=E.BASEFONT=E.COL=E.COMMAND=E.EMBED=E.KEYGEN=E.PARAM=E.SOURCE=function(){D+='<div id="absElemAttr"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu"><div id="absElemAttr" alt="Edit the tag\'s attributes">Attributes</div></div></div>'+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.BR=E.HR=E.WBR=function(){D+=Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+Q+ab};E.AUDIO=E.VIDEO=function(){D+='<div id="absElemAttr"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+'</div></div><div><span class="abs-menu-insert"></span>Insert<div class="absSubmenu"><div id="absCreateSource" alt="Add a Source tag* - HTML5">Source</div></div></div>'+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.CANVAS=function(){D+='<div id="absElemAttr"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+"</div></div>"+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.COLGROUP=function(){D+='<div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+'</div></div><div><span class="abs-menu-insert"></span>Insert<div class="absSubmenu"><div id="absCreateCol" alt="Add a column">Col</div></div></div>'+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.DATALIST=E.SELECT=function(){D+='<div id="absCreateOption" alt="Add an option to the list"><span class="abs-menu-insert"></span>Option</div><div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+"</div></div>"+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.DETAILS=function(){D+='<div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+G+'</div></div><div><span class="abs-menu-insert"></span>Insert<div class="absSubmenu"><div id="absCreateSum" alt="Add a Summary* - HTML5">Summary</div>'+Y+I+R+"<hr />"+S+"<hr />"+K+'<div id="absCreateForm" alt="Add a Form">Form</div><div id="absCreateTable" alt="Add a Table">Table</div></div></div>'+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.DIR=E.UL=E.OL=function(){D+='<div alt="Add a list item" id="absCreateLI"><span class="abs-menu-insert"></span>Add LI</div></div></div><div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+"</div></div>"+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.DL=function(){D+='<div alt="Insert a Term" id="absCreateDT"><span class="abs-menu-insert"></span>Add DT</div><div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+G+"</div></div>"+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.DT=function(){D+='<div alt="Add a Description" id="absCreateDD"><span class="abs-menu-insert"></span>Add DD</div><div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+G+"</div></div>"+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.FIELDSET=function(){D+='<div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+'</div></div><div><span class="abs-menu-insert"></span>Insert<div class="absSubmenu"><div id="absCreateLgnd" alt="Add a caption to this fieldset">Legend</div><div id="absCreateLbl" alt="Add a label">Label</div><div id="absCreateInput" alt="Add an input">Input</div></div></div>'+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.FIGURE=function(){D+='<div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+'</div></div><div><span class="abs-menu-insert"></span>Insert<div class="absSubmenu"><div id="absCreateFigCapt" alt="Add a Caption* - HTML5">Caption</div><hr/>'+S+"</div></div>"+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.FORM=function(){D+='<div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+'</div></div><div><span class="abs-menu-insert"></span>Insert<div class="absSubmenu"><div id="absCreateFieldset" alt="Create a Fieldset">Fieldset</div><div id="absCreateInput" alt="Add an input">Input</div></div></div>'+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.FOOTER=E.HEADER=function(){D+='<div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+G+'</div></div><div><span class="abs-menu-insert"></span>Insert<div class="absSubmenu"><div>Layer<div class="absSubmenu"><div id="absCreateDiv" alt="Add a Division">DIV</div><div id="absCreateNav" alt="Add Navigation links* - HTML5">Nav</div></div></div><hr /><div id="absCreateHgroup" alt="Add a Header Group">Hgroup</div><div id="absCreateImg" alt="Add an image">Image</div><div id="absCreateP" alt="Add a paragraph">Paragraph</div>'+R+"<hr/>"+K+'<div id="absCreateTable" alt="Add a Table">Table</div></div></div>'+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.HGROUP=function(){D+=R+'<div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+"</div></div>"+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.IFRAME=function(){D+='<div id="absElemAttr"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+"</div></div>"+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.IMG=function(){D+='<div id="absEditImage"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu"><div id="absElemAttr" alt="Edit the tag\'s attributes">Attributes</div><div id="absEditImage" alt="Change the image\'s source">Source</div>'+B+'</div></div><div id="absCreateMap" alt="Map coordinates on image"><span class="abs-menu-insert"></span>Add Map</div>'+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.LABEL=function(){D+='<div id="absCreateInput" alt="Add an input"><span class="abs-menu-insert"></span>Add Input</div><div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+"</div></div>"+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.MAP=function(){D+='<div alt="Add a Map Area" id="absCreateArea"><span class="abs-menu-insert"></span>Add Area</div><div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+'<div id="absEditEvents" alt="Edit the tag\'s events">Events</div></div></div>'+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.MENU=function(){D+='<div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+'</div></div><div><span class="abs-menu-insert"></span>Insert<div class="absSubmenu"><div id="absCreateLI" alt="Add an item to the list">List Item</div><div id="absCreateCommand" alt="Add a Command to the menu* - HTML5">Command</div></div></div>'+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.NAV=function(){D+='<div alt="Add a hyperlink" id="absCreateA"><span class="abs-menu-insert"></span>Add Link</div><div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+G+"</div></div>"+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.NOFRAMES=E.NOSCRIPT=function(){D+='<div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+'</div></div><div><span class="abs-menu-insert"></span>Insert<div class="absSubmenu"><div id="absCreateLink" alt="Add a Link tag">Link</div><div id="absCreateStyle" alt="Add a Style tag">Style</div><hr /><div id="absCreateP" alt="Add a paragraph">Paragraph</div></div></div>'+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.OBJECT=function(){D+='<div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+'</div></div><div><span class="abs-menu-insert"></span>Insert<div class="absSubmenu"><div id="absCreateParam" alt="Add a Parameter">Parameter</div><div id="absCreateSwf" alt="Add an Embed tag">Embed</div><div id="absCreateMap" alt="Map coordinates on the object"><span class="abs-menu-insert"></span>Map</div></div></div>'+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.OPTGROUP=function(){D+='<div id="absCreateOption" alt="Add an Option">+Option</div><div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+"</div></div>"+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.OPTION=function(){D+='<div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+"</div></div>"+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.RUBY=function(){D+='<div id="absCreateRT" alt="Add Ruby text"><span class="abs-menu-insert"></span>Add RT</div><div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+G+"</div></div>"+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.RT=function(){D+='<div id="absCreateRP" alt="Add Ruby Parenthesis for unsupporting browsers"><span class="abs-menu-insert"></span>Add RP</div><div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+"</div></div>"+Z+'<hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+ab};E.SPAN=function(){switch(X.getAttribute("class")){case"abs-inline-php":D='<h1 style="color: red;">&lt;?PHP&gt;</h1><div>Edit</div>'+Z+"<hr />"+Q+'<hr /><div id="absSaveDoc"><span class="abs-menu-save"></span>Save</div>'+ac+O;break;default:D+='<div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+G+'</div></div><div><span class="abs-menu-insert"></span>Insert<div class="absSubmenu">'+Y+I+R+"<hr />"+S+"<hr />"+K+'<div id="absCreateForm" alt="Add a Form">Form</div><div id="absCreateTable" alt="Add a Table">Table</div></div></div><hr /><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+Z+ab;break}};E.TABLE=function(){D+='<div><span class="abs-menu-insert"></span>Insert<div class="absSubmenu"><div id="absCreateCaption" alt="Add a Table Caption">Caption</div><div id="absCreateThead" alt="Add a Table Header">Header</div><div id="absCreateTrow" alt="Add a Row">Row</div><div id="absCreateTfoot" alt="Add a Table Footer">Footer</div></div></div><div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+'</div></div><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+Z+ab};E.TBODY=function(){D+='<div id="absCreateTrow" alt="Add a Row"><span class="abs-menu-insert"></span>Add Row</div><div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+'</div></div><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+Z+ab};E.TFOOT=E.THEAD=function(){D+='<div id="absCreateTrow" alt="Add a row"><span class="abs-menu-insert"></span>Add Row</div><div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+B+'</div></div><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+Z+ab};E.TR=function(){D+='<div id="absCreateColumn" alt="Add a Column"><span class="abs-menu-insert"></span>Add TD</div><div id="absEditInnerHTML"><span class="abs-menu-edit"></span>Edit<div class="absSubmenu">'+U+'<div id="absEditStyles" alt="Edit the row\'s styles">Styles</div><hr /><div id="absEditEvents" alt="Edit the row\'s events">Events</div></div></div><div id="absElemCopy" alt="Copy to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+N+Q+Z+ab};if(typeof E[X.nodeName]=="function"){E[X.nodeName]();E={}}else{E={};return false}}else{var W="";var F="";H.$frame.contents().find("link:not(.abs-ui), style").each(function(){if($(this).attr("href")==undefined){}else{var af=$(H.elementHash.get(this)).attr("href").split("/");af=uncacheSafe(af[af.length-1]);var ag=uncacheSafe($(H.elementHash.get(this)).attr("href"));var ae=ag.split(p.root);if(ae.length>1){ag=ae[1]}if(H.returnPath!=""){ae=ag.split(H.returnPath);if(ae.length>1){ag=ae[1]}}if(ag.charAt(0)!="/"){ag="/"+ag}W+='<div alt="Edit this stylesheet" class="'+ag+' absSelStylesheet">'+af+"</div>"}});H.$frame.contents().find("script:not(.abs-ui)").each(function(){if($(this).attr("src")==undefined){F+='<div id="lvl'+C+'" class="absInlineScript" alt="Edit this script">inline script</div>';H.scriptRefs[C]=this;C++}else{var ag=$(H.elementHash.get(this)).attr("src").split("/");ag=uncacheSafe(ag[ag.length-1]);var af=uncacheSafe($(H.elementHash.get(this)).attr("src"));var ae=af.split(p.root);if(ae.length>1){af=ae[1]}if(H.returnPath!=""){ae=af.split(H.returnPath);if(ae.length>1){af=ae[1]}}if(af.charAt(0)!="/"){af="/"+af}F+='<div alt="Edit this script" class="'+af+' absSelScript">'+ag+"</div>"}});D+=Z+'<hr /><div><span class="abs-menu-css"></span>Stylesheets<div class="absSubmenu">'+W+'</div></div><div><span class="abs-menu-scripts"></span>Scripts<div class="absSubmenu">'+F+"</div></div><hr />"+P+ac+O}ad.$.removeClass("abs-taskbar-contextMenu").empty().html(D);ad.$.find("div").hover(ad.submenuMouseover,ad.submenuMouseout);$("#absToggleAdmin").bind("click",ad.adminToggle);$("#absElemCopy").bind("click",ad.copyElement);$(".absElemPaste").bind("click",ad.pasteElement);$("#absClipboardClear").bind("click",ad.clearClipboard);$("#absPosRel").bind("click",ad.positionElemRel);$("#absPosAbs").bind("click",ad.positionElemAbs);$("#absPosFix").bind("click",ad.positionElemFix);$("#absEditSize").bind("click",ad.editElemSize);$("#absEditText").bind("click",ad.editElemText);$("#absEditImage").bind("click",ad.editElemImage);$("#absEditStyles").bind("click",ad.editElemStyles);$("#absElemAttr").bind("click",ad.editElemAttr);$("#absEditInnerHTML").bind("click",ad.editElemHTML);$("#absEditHTML").bind("click",ad.editDocHTML);$("#absCreateA").bind("click",ad.createElemA);$("#absCreateArticle").bind("click",ad.createElemArticle);$("#absCreateArea").bind("click",ad.createElemArea);$("#absCreateAside").bind("click",ad.createElemAside);$("#absCreateAudio").bind("click",ad.createElemAudio);$("#absCreateCanvas").bind("click",ad.createElemCanvas);$("#absCreateCaption").bind("click",ad.createElemCaption);$("#absCreateCol").bind("click",ad.createElemCol);$("#absCreateColumn").bind("click",ad.createElemTD);$("#absCreateCommand").bind("click",ad.createElemCommand);$("#absCreateBase").bind("click",ad.createElemBase);$("#absCreateDeta").bind("click",ad.createElemDetails);$("#absCreateDD").bind("click",ad.createElemDD);$("#absCreateDiv").bind("click",ad.createElemDiv);$("#absCreateDL").bind("click",ad.createElemDL);$("#absCreateDT").bind("click",ad.createElemDT);$("#absCreateFigCapt").bind("click",ad.createElemFigCaption);$("#absCreateFigure").bind("click",ad.createElemFigure);$("#absCreateFooter").bind("click",ad.createElemFooter);$("#absCreateForm").bind("click",ad.createElemForm);$("#absCreateFieldset").bind("click",ad.createElemFieldset);$("#absCreateH1").bind("click",ad.createElemH1);$("#absCreateH2").bind("click",ad.createElemH2);$("#absCreateH3").bind("click",ad.createElemH3);$("#absCreateH4").bind("click",ad.createElemH4);$("#absCreateH5").bind("click",ad.createElemH5);$("#absCreateH6").bind("click",ad.createElemH6);$("#absCreateHeader").bind("click",ad.createElemHeader);$("#absCreateHgroup").bind("click",ad.createElemHgroup);$("#absCreateImg").bind("click",ad.createElemImg);$("#absCreateInput").bind("click",ad.createElemInput);$("#absCreateLbl").bind("click",ad.createElemLabel);$("#absCreateLgnd").bind("click",ad.createElemLegend);$("#absCreateLI").bind("click",ad.createElemLI);$("#absCreateLink").bind("click",ad.createElemLink);$("#absCreateMap").bind("click",ad.createElemMap);$("#absCreateMenu").bind("click",ad.createElemMenu);$("#absCreateNav").bind("click",ad.createElemNav);$("#absCreateNoScript").bind("click",ad.createElemNoScript);$("#absCreateObject").bind("click",ad.createElemObject);$("#absCreateOL").bind("click",ad.createElemOL);$("#absCreateP").bind("click",ad.createElemP);$("#absCreateParam").bind("click",ad.createElemParam);$("#absCreateRP").bind("click",ad.createElemRP);$("#absCreateRT").bind("click",ad.createElemRT);$("#absCreateSection").bind("click",ad.createElemSection);$("#absCreateSource").bind("click",ad.createElemSource);$("#absCreateStyle").bind("click",ad.createElemStyle);$("#absCreateSum").bind("click",ad.createElemSummary);$("#absCreateSwf").bind("click",ad.createElemEmbed);$("#absCreateTable").bind("click",ad.createElemTable);$("#absCreateTfoot").bind("click",ad.createElemTfoot);$("#absCreateThead").bind("click",ad.createElemThead);$("#absCreateTrow").bind("click",ad.createElemTrow);$("#absCreateUL").bind("click",ad.createElemUL);$("#absCreateVideo").bind("click",ad.createElemVideo);$("#absDelete").bind("click",ad.deleteElement);$("#absNewCss").bind("click",ad.createNewCSS);$("#absNewJs").bind("click",ad.createNewJS);$("#absSaveDoc").bind("click",function(){p.activeState.save()});$("#absUndoAct").bind("click",ad.undoAction);$("#absRedoAct").bind("click",ad.redoAction);$(".absSelParent").bind("click",ad.parentClick);$(".absSelParent").bind("mouseenter",ad.parentMouseover);$(".absSelParent").parent().bind("mouseleave",ad.parentWrapperMouseout);$(".absSelScript").bind("click",ad.editScript);$(".absSelStylesheet").bind("click",ad.editStylesheet);$(".absInlineScript").bind("click",ad.editInlineScript);$(".absInlineStylesheet").bind("click",ad.editInlineStylesheet);$("#absContextMenu div:not(.absSubmenu)").bind("mouseenter",ad.setTooltip);H=null;return true};A.prototype.file=function(D){var C=this;p.contextFile=D;C.target=p.fileManager;var F='<div style="color: gray;" alt="There are no files in your clipboard"><span class="abs-menu-paste"></span>Paste</div>';if(p.fileManager.clipboard.length>=1){F='<div><span class="abs-menu-paste"></span>Paste<div class="absSubmenu">';for(var B in p.fileManager.clipboard){F+='<div class="absFilePaste" id="lvl'+B+'" alt="Paste '+p.fileManager.clipboard[B].substr(1)+' in this directory">'+p.fileManager.clipboard[B].substr(1)+"</div>"}F+='<div id="absClipboardClear" alt="Clear the clipboard">Clear</div></div></div>'}if(p.fileManager.selection.length>1){var G='<h1>Selected files</h1><div id="absFileCopy" alt="Copy these files to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+F+'<div><span class="abs-menu-delete"></span>Delete<div class="absSubmenu"><div id="absDelete" alt="Delete these files?" style="color:pink">Confirm</div></div></div>';$("#absContextMenu").empty().html(G);$("#absContextMenu div").hover(C.submenuMouseover,C.submenuMouseout);$("#absClipboardClear").bind("click",C.clearFileClipboard);$("#absFileCopy").bind("click",C.copyFiles);$(".absFilePaste").bind("click",C.pasteFiles);$("#absDelete").bind("click",C.deleteFiles);$("#absContextMenu div:not(.absSubmenu)").bind("mouseenter",C.setTooltip);return true}var G=D.split("/");var G="<h1>/"+G[G.length-1]+"</h1>";var E={};E.zip=E.rar=E.dir=function(){G+='<div id="absOpenDir" alt="Open this directory"><span class="abs-menu-open"></span>Open</div><div id="absFileCopy" alt="Copy this directory to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+F+'<div id="absFileRename" alt="Rename this file"><span class="abs-menu-rename"></span>Rename</div><div><span class="abs-menu-delete"></span>Delete<div class="absSubmenu"><div id="absDelete" alt="Delete this directory?" style="color:pink">Confirm</div></div></div><hr /><div id="absNewFile" alt="Create a new file"><span class="abs-menu-newFile"></span>New File<div class="absSubmenu"><div id="absNewCss" alt="Create a new css file?">Css</div><div id="absNewHtml" alt="Create a new html file?">Html</div><div id="absNewJs" alt="Create a new javascript file?">Javascript</div><div id="absNewPhp" alt="Create a new php file?">Php</div><hr /><div alt="Create a new file?">Other</div></div></div><div id="absNewDirectory" alt="Create a new directory"><span class="abs-menu-newDir"></span>New Folder</div><div id="absUploadFile" alt="Upload a file"><span class="abs-menu-upload"></span>Upload</div>'};E.html=E.htm=E.php=E.pl=E.py=E.xml=E.log=E.js=E.css=E.htaccess=E.htpasswd=E.txt=function(){G+='<div id="absFileEdit" alt="Edit this file\'s source"><span class="abs-menu-edit"></span>Edit</div><div id="absFileCopy" alt="Copy this file to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+F+'<div id="absFileRename" alt="Rename this file"><span class="abs-menu-rename"></span>Rename</div><div><span class="abs-menu-delete"></span>Delete<div class="absSubmenu"><div id="absDelete" alt="Delete this file?" style="color:pink">Confirm</div></div></div><hr /><div id="absNewFile" alt="Create a new file"><span class="abs-menu-newFile"></span>New File<div class="absSubmenu"><div id="absNewCss" alt="Create a new css file?">Css</div><div id="absNewHtml" alt="Create a new html file?">Html</div><div id="absNewJs" alt="Create a new javascript file?">Javascript</div><div id="absNewPhp" alt="Create a new php file?">Php</div><hr /><div alt="Create a new file?">Other</div></div></div><div id="absNewDirectory" alt="Create a new directory"><span class="abs-menu-newDir"></span>New Folder</div><div id="absUploadFile" alt="Upload a file"><span class="abs-menu-upload"></span>Upload</div>'};E.jpeg=E.jpg=E.gif=E.png=E.ico=E.bmp=function(){G+='<div id="absFileCopy" alt="Copy this file to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+F+'<div id="absFileRename" alt="Rename this file"><span class="abs-menu-rename"></span>Rename</div><div><span class="abs-menu-delete"></span>Delete<div class="absSubmenu"><div id="absDelete" alt="Delete this file?" style="color:pink">Confirm</div></div></div><hr /><div id="absNewFile" alt="Create a new file"><span class="abs-menu-newFile"></span>New File<div class="absSubmenu"><div id="absNewCss" alt="Create a new css file?">Css</div><div id="absNewHtml" alt="Create a new html file?">Html</div><div id="absNewJs" alt="Create a new javascript file?">Javascript</div><div id="absNewPhp" alt="Create a new php file?">Php</div><hr /><div alt="Create a new file?">Other</div></div></div><div id="absNewDirectory" alt="Create a new directory"><span class="abs-menu-newDir"></span>New Folder</div><div id="absUploadFile" alt="Upload a file"><span class="abs-menu-upload"></span>Upload</div>'};E.aif=E.mpa=E.mp3=E.mp4=E.oga=E.ogg=E.rm=E.wav=E.wma=E.wmp=function(){G+='<div id="absAudioPlay" alt="Play this audio file"><span class="abs-menu-playAudio"></span>Play</div><div id="absFileCopy" alt="Copy this file to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+F+'<div id="absFileRename" alt="Rename this file"><span class="abs-menu-rename"></span>Rename</div><div><span class="abs-menu-delete"></span>Delete<div class="absSubmenu"><div id="absDelete" alt="Delete this file?" style="color:pink">Confirm</div></div></div><hr /><div id="absNewFile" alt="Create a new file"><span class="abs-menu-newFile"></span>New File<div class="absSubmenu"><div id="absNewCss" alt="Create a new css file?">Css</div><div id="absNewHtml" alt="Create a new html file?">Html</div><div id="absNewJs" alt="Create a new javascript file?">Javascript</div><div id="absNewPhp" alt="Create a new php file?">Php</div><hr /><div alt="Create a new file?">Other</div></div></div><div id="absNewDirectory" alt="Create a new directory"><span class="abs-menu-newDir"></span>New Folder</div><div id="absUploadFile" alt="Upload a file"><span class="abs-menu-upload"></span>Upload</div>'};E.avi=E.mov=E.mpg=E.ogv=E.wmp=E.swf=E.wmv=function(){G+='<div id="absVideoPlay" alt="Play this video file"><span class="abs-menu-playVideo"></span>Play</div><div id="absFileCopy" alt="Copy this file to your clipboard"><span class="abs-menu-copy"></span>Copy</div>'+F+'<div id="absFileRename" alt="Rename this file"><span class="abs-menu-rename"></span>Rename</div><div><span class="abs-menu-delete"></span>Delete<div class="absSubmenu"><div id="absDelete" alt="Delete this file?" style="color:pink">Confirm</div></div></div><hr /><div id="absNewFile" alt="Create a new file"><span class="abs-menu-newFile"></span>New File<div class="absSubmenu"><div id="absNewCss" alt="Create a new css file?">Css</div><div id="absNewHtml" alt="Create a new html file?">Html</div><div id="absNewJs" alt="Create a new javascript file?">Javascript</div><div id="absNewPhp" alt="Create a new php file?">Php</div><hr /><div alt="Create a new file?">Other</div></div></div><div id="absNewDirectory" alt="Create a new directory"><span class="abs-menu-newDir"></span>New Folder</div><div id="absUploadFile" alt="Upload a file"><span class="abs-menu-upload"></span>Upload</div>'};if(D=="none"){p.contextFile="/";G='<h1>/</h1><div id="absNewFile" alt="Create a new file"><span class="abs-menu-newFile"></span>New File<div class="absSubmenu"><div id="absNewCss" alt="Create a new css file?">Css</div><div id="absNewHtml" alt="Create a new html file?">Html</div><div id="absNewJs" alt="Create a new javascript file?">Javascript</div><div id="absNewPhp" alt="Create a new php file?">Php</div><hr /><div alt="Create a new file?">Other</div></div></div><div id="absNewDirectory" alt="Create a new directory"><span class="abs-menu-newDir"></span>New Folder</div><div id="absUploadFile" alt="Upload a file"><span class="abs-menu-upload"></span>Upload</div>'+F;E=null}else{if(typeof E[getFileType(D)]=="function"){E[getFileType(D)]();E={}}else{E={};return false}}$("#absContextMenu").removeClass("abs-taskbar-contextMenu").empty().html(G);$("#absContextMenu div").hover(C.submenuMouseover,C.submenuMouseout);$("#absClipboardClear").bind("click",C.clearFileClipboard);$("#absNewFile").bind("click",C.newFile);$("#absNewDirectory").bind("click",C.newDirectory);$("#absUploadFile").bind("click",C.uploadFile);$("#absFileEdit").bind("click",C.editFile);$("#absFileCopy").bind("click",C.copyFile);$(".absFilePaste").bind("click",C.pasteFile);$("#absFileRename").bind("click",C.renameFile);$("#absDelete").bind("click",C.deleteFile);$("#absContextMenu div:not(.absSubmenu)").bind("mouseenter",C.setTooltip);return true};A.prototype.revision=function(B,E){var D=this;p.contextRevision=B;D.target=p.revisionManager;if(p.revisionManager.selection.length>1){var F='<h1>Selected revisions</h1><div><span class="abs-menu-delete"></span>Delete<div class="absSubmenu"><div id="absDelete" alt="Delete these files?" style="color:pink">Confirm</div></div></div>';$("#absContextMenu").removeClass("abs-taskbar-contextMenu").empty().html(F);$("#absContextMenu div").hover(D.submenuMouseover,D.submenuMouseout);$("#absDelete").bind("click",D.deleteRevisions);$("#absContextMenu div:not(.absSubmenu)").bind("mouseenter",D.setTooltip);return true}if(B=="none"){F="<h1>/"+D.target.state.currentDoc+'</h1><div id="absCreateRevision" alt="Create a new revision of the current document">New Revision</div><div id="absCreateRevDir" alt="Create a new directory">New Folder</div>'}else{if(B.indexOf(".backup")==-1){var C=B.split("/");C=C[C.length-1];C=C.split("-");C=new Date(C[0],C[1]-1);C=C.toDateString().split(" ");C=C[1]+" "+C[3];var F="<h1>"+C+"</h1>";F+='<div id="absLoadDirectory" alt="Open this directory">Open</div><div id="absRenameDirectory" alt="Rename this directory">Rename</div><div>Delete<div class="absSubmenu"><div id="absDeleteRevision" alt="Delete this directory?" style="color:pink">Confirm</div></div></div><hr /><div id="absCreateRevision" alt="Create a new revision in this directory">New Revision</div><div id="absCreateRevDir" alt="Create a new directory">New Folder</div>'}else{var C=B.split("/");C=C[C.length-1];C=C.replace(".backup","").split("-");C=new Date(C[0],C[1]-1,C[2],C[3],C[4],C[5]);C=C.toString().split(" GMT");C=C[0].split(" ");var F="<h1>"+C[1]+" "+C[2]+" "+C[4]+"</h1>";F+='<div id="absLoadRevision" alt="Load from this revision">Load</div><div id="absRenameRevision" alt="Rename this revision">Rename</div><div>Delete<div class="absSubmenu"><div id="absDeleteRevision" alt="Delete this revision?" style="color:pink">Confirm</div></div></div><hr /><div id="absCreateRevision" alt="Create a new revision in this directory">New Revision</div><div id="absCreateRevDir" alt="Create a new directory">New Folder</div>'}}$("#absContextMenu").removeClass("abs-taskbar-contextMenu").empty().html(F);$("#absContextMenu div").hover(D.submenuMouseover,D.submenuMouseout);$("#absCreateRevision").bind("click",D.createRevision);$("#absCreateRevDir").bind("click",D.createRevDir);$("#absLoadRevision").bind("click",D.loadRevision);$("#absRenameRevision").bind("click",D.renameRevision);$("#absRenameDirectory").bind("click",D.renameRevision);$("#absDeleteRevision").bind("click",D.deleteRevision);$("#absContextMenu div:not(.absSubmenu)").bind("mouseenter",D.setTooltip);return true};A.prototype.taskbar=function(C){var B=this;B.target=p.taskbar;var D="<h1>"+C.title+"</h1>";C.menu.set(C.menu.json);$("#absContextMenu").addClass("abs-taskbar-contextMenu").empty().html(D).append(C.menu.fragment);$("#absContextMenu div:not(.absSubmenu)").bind("mouseenter",B.setTooltip);return true};A.prototype.submenuMouseover=function(){var C=$(this).children(".absSubmenu");if($("#absContextMenu").offset().left>$(window).width()*0.85){var B=-$(this).children(".absSubmenu").width()-2;C.addClass("abs-right-side");C.removeClass("abs-left-side")}else{var B=$(this).width()+6;C.removeClass("abs-right-side");C.addClass("abs-left-side")}C.css({left:B,top:-1}).fadeIn("fast")};A.prototype.submenuMouseout=function(){$(this).children(".absSubmenu").fadeOut("fast")};return A})();var u=(function(){A.Inherits(Window);function A(D,G,B,K){K=K||p.desktop;B=B||{};var E=this,H,L,F=false;this.currentPath="";this.returnPath="";this.file="";this.loaded=false;this.menuClosed=true;this.$=$("<div/>").attr("class","window abs-documentPreview-ui abs-ui").css("display","none").appendTo(K);this.window=this.$.get(0);this.$wrapper=$("<div/>").addClass("abs-documentPreview-wrapper").attr("style","overflow: hidden; background-color: #cfcfcf").appendTo(this.window);this.wrapper=this.$wrapper.get(0);this.$frame=$("<iframe/>").addClass("abs-documentPreview-frame-ui abs-ui").attr({id:"abs-documentPreview-frame-"+k.size(),name:"abs-documentPreview-frame-"+k.size()}).appendTo(this.wrapper);this.frame=this.$frame.get(0);this.$selector=$("<div/>").addClass("abs-selector-ui abs-ui").appendTo(this.wrapper);this.selector=this.$frame.get(0);this.name="documentPreview";this.workingAssets={};this.liveAssets={};this.linkedAssetEditors={};var C=new Menu({refresh:{content:'<span class="abs-menu-refresh"></span>Refresh',click:function(){E.refresh()}},save:{content:'<span class="abs-menu-save"></span>Save'},close:{content:'<span class="abs-menu-delete"></span>Close',click:function(){E.close()}},insert:"<hr />",options:{content:'<span class="abs-menu-options"></span>Options',mouseover:function(){var M=$(this).children(".ui-submenu");clearTimeout(L);M.css("display","block");if(M.offset().top+M.outerHeight()>$window.height()){M.css({top:M.position().top-((M.offset().top+M.outerHeight())-$window.height())})}M.css({left:$(this).parent().width()})},mouseout:function(){var M=this;L=setTimeout(function(){$(M).children(".ui-submenu").fadeOut("fast");M=null},500)},children:{resolution:{content:"<span class='abs-menu-blank'></span>resolution",styles:"color: gray;"},dockable:{content:function(){return p.previewsDockable?"<span class='abs-menu-check'></span>dockable":"<span class='abs-menu-blank'></span>dockable"},click:function(){p.previewsDockable=!p.previewsDockable;if(p.previewsDockable){k.each(function(M,N){N.dockable=true});$(".window-menu > .options .dockable span").attr("class","abs-menu-check")}else{k.each(function(M,N){N.dockable=false});$(".window-menu > .options .dockable span").attr("class","abs-menu-blank")}p.saveUI()}}}}});C.$.addClass("window-menu").mouseenter(function(){clearTimeout(H)}).mouseleave(function(){H=setTimeout(function(){E.$menu.hide();E.menuClosed=true},500)});if(p.activeState&&p.activeState.preview){var J=parseInt(p.activeState.preview.left())+20;var I=parseInt(p.activeState.preview.top())+20;if(p.activeState.preview.isMaximized){F=true}}else{var J=200;var I=20}E.options($.extend({selector:this.window,title:"<div class='abs-preview-icon'></div>Document Preview",taskbar:G,left:J,top:I,width:900,height:700,attachedWidth:700,dragstop:E.saveUI,resizestop:E.saveUI,minimize:E.saveUI,unminimize:E.saveUI,maximize:E.saveUI,unmaximize:E.saveUI,menu:C,openmenu:E.toggleMenu,focus:E.onfocus},B));if(F){E.maximize(true)}else{E.checkBounds()}E.load(D);E.open();E.setZindex();C=null}A.prototype.saveUI=function(){p.saveUI()};A.prototype.bindContextMenu=function(){var B=this,C=B.frame.contentWindow.document,D=$(C).find("html").get(0);$(C).bind("contextmenu",function(E){B.oncontextmenu(E)}).bind("click",function(){p.docClick()})};A.prototype.bindInternalLinks=function(){var C=this,B=C.frame.contentWindow.document.getElementsByTagName("a");for(var D=0;D<B.length;D++){if($(B[D]).attr("href")&&$(B[D]).attr("href").search(/(http:\/\/|https:\/\/)/i)==-1){$(B[D]).unbind("click.linkClick").bind("click.linkClick",function(){var F=this.href;var E=F.split(p.root);if(E.length>1){F=E[1]}F=(F.charAt(0)=="/")?F:"/"+F;if(k.get(F)==undefined){new A(F,p.taskbar)}if(c.get(F)==undefined){new n(F,p.taskbar)}return false})}else{if($(B[D]).attr("href")){$(B[D]).unbind("click.linkClick").bind("click.linkClick",function(){window.open(this.href);return false})}}}};A.prototype.bindWorkingDocs=function(){var H=this,D=H.frame.contentWindow.document.getElementsByTagName("link");docScripts=H.frame.contentWindow.document.getElementsByTagName("script");for(var I=0;I<D.length;I++){var G=uncacheSafe(D[I].href);var C=G.split(p.root);if(C.length>1){G=C[1];G=(G.charAt(0)=="/")?G:"/"+G;var F=H.state.returnPath+((G.charAt(0)=="/")?G.slice(1):G);if(!H.workingAssets[G]){var E=c.get(G);if(E!=undefined){var B=H.state.returnPath+((E.state.workingDoc.charAt(0)=="/")?E.state.workingDoc.slice(1):E.state.workingDoc);H.workingAssets[G]=B;H.liveAssets[E.state.workingDoc]=F;D[I].href=cacheSafePath(uncacheSafe(H.workingAssets[G]));E.linkedPreviews[G]=H;H.linkedAssetEditors[G]=E}else{D[I].href=cacheSafePath(uncacheSafe(F))}}else{D[I].href=cacheSafePath(uncacheSafe(H.workingAssets[G]))}}else{D[I].href=cacheSafePath(uncacheSafe(D[I].href))}}for(var I=0;I<docScripts.length;I++){if(docScripts[I].src){var G=uncacheSafe(docScripts[I].src);var C=G.split(p.root);if(C.length>1){G=C[1]}G=(G.charAt(0)=="/")?G:"/"+G;if(!H.workingAssets[G]){var E=c.get(G);if(E!=undefined){H.workingAssets[G]=(E.state.workingDoc.charAt(0)=="/")?E.state.workingDoc.slice(1):E.state.workingDoc;H.liveAssets[E.state.workingDoc]=(G.charAt(0)=="/")?G.slice(1):G;E.linkedPreviews[G]=H;H.linkedAssetEditors[G]=E}}}}};A.prototype.unbindWorkingDoc=function(C){var B=this;B.linkedAssetEditors[C].linkedPreviews={};delete B.workingAssets[C];delete B.liveAssets[B.linkedAssetEditors[C].state.workingDoc];delete B.linkedAssetEditors[C];this.state.update()};A.prototype.unbindWorkingDocs=function(){var B=this;for(var C in B.linkedAssetEditors){delete B.linkedAssetEditors[C].linkedPreviews[C]}B.workingAssets={};B.liveAssets={}};A.prototype.close=function(){this.unbindWorkingDocs();$(this.frame.contentWindow.document).unbind();this.state.preview=undefined;this.state.$preview=undefined;k.remove(this.file);var B=this.state.winZindex.length;while(B--){if(this.state.winZindex[B]===this){this.state.winZindex.splice(B,1)}}this.menu.destroy();this.destroy();p.saveUI()};A.prototype.load=function(D){var B=this;arr=D.split(p.root);if(arr.length>1){D=arr[1]}arr=D.split("/");for(var C=0;C<arr.length-1;C++){if(arr[C]!=""){B.currentPath+=arr[C]+"/";B.returnPath+="../"}}arr=D.split("?");if(arr.length>1){D=arr[0];B.urlQuery="?"+arr[1]}else{B.urlQuery=""}if(D.charAt(0)!="/"){D="/"+D}if(B.currentDoc==undefined){B.currentDoc=uncacheSafe(D.substr(1))}else{B.lastDoc=B.currentDoc;B.currentDoc=uncacheSafe(D.substr(1));p.saveUI()}k.put(D,B);B.file=D;if(D.length<24){B.setTitle("<div class='abs-preview-icon'></div>Viewing: /"+B.currentDoc+B.urlQuery)}else{B.setTitle("<div class='abs-preview-icon'></div>Viewing: ... "+(B.currentDoc+B.urlQuery).slice(-24))}B.state=d.get(D);if(B.state==undefined){B.state=new t(D)}else{B.state.linkDocumentPreview(B)}B.state.onload(function(){var E,F;$(B.frame.contentWindow.document).bind("keydown",q).bind("keyup",b);$(B.menu.save).unbind("click").bind("click",function(){B.state.save()})})};A.prototype.oncontextmenu=function(G){var C=this,H,E,D=C.frame.contentWindow.document;G=window.event||G;if(G.stopPropagation){G.stopPropagation()}else{G.cancelBubble=true}var F=G.target!=null?G.target:G.srcElement;if(G.pageX!=undefined){H=G.pageX;E=G.pageY}else{H=G.clientX;E=G.clientY}if(p.contextMenu.element(F,C.state)){var I=0;var B=(navigator.userAgent.indexOf("Firefox")!=-1)?$(D).find("html,body").scrollTop():$(D).find("body").scrollTop();H=H+C.$frame.offset().left;E=E-B+C.$frame.offset().top;if(E+p.contextMenu.$.outerHeight()>$window.height()){E=$window.height()-p.contextMenu.$.outerHeight()}p.contextMenu.$.css({display:"none",left:H+"px",top:E+"px"}).fadeIn("fast")}G.preventDefault();return false};A.prototype.onfocus=function(){var B=this;if(p.activeState!=B.state){p.activeState=B.state;p.sourceOutline.load(B.file);p.revisionManager.load(B.file)}p.updateGroupFocus(B)};A.prototype.refresh=function(C){C=C||function(){};var B=this;this.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");$(B.frame.contentWindow.document).unbind();B.state.update()};A.prototype.setZindex=function(){var B=this.state.winZindex.length;while(B--){if(this.state.winZindex[B]===this){this.state.winZindex.splice(B,1)}}this.state.winZindex[this.state.winZindex.length]=this};A.prototype.toggleMenu=function(){var B=this;if(B.menuClosed){B.$menu.show();B.menuClosed=false}else{B.$menu.hide();B.menuClosed=true}};return A})();this.DocumentPreview=u;var t=(function(){function A(C){var B=this;B.currentPath="";B.returnPath="";B.source="";B.loaded=false;B.saved=true;B.doctype="";B.protectedMode=true;B.elementHash=new Hashtable();B.loadQueue=[];B.php=[];B.history=[];B.redoHistory=[];B.clipboard=[];B.winZindex=[];B.scriptRefs=[];B.inlineEditors=[];B.attributeEditors=[];B.liveAssets={};B.workingAssets={};B.linkedAssetEditors={};this.name="documentState";if(C!=undefined){B.load(C)}}A.prototype.add=function(E,D){var B=this;var C=E.cloneNode(false);D.appendChild(C);B.elementHash.put(E,C);B.elementHash.put(C,E);this.appendChildren(E,C)};A.prototype.appendChildren=function(D,C){var B=this;E(D,C);function E(J,I){var F=J.childNodes.length;for(var G=0;G<F;G++){var H=J.childNodes[G].cloneNode(false);I.appendChild(H);B.elementHash.put(J.childNodes[G],H);B.elementHash.put(H,J.childNodes[G]);if(J.childNodes.length>0){E(J.childNodes[G],H)}}}};A.prototype.createElement=function(F,H,C){var B=this,E=document.createElement(F),G=[];G.A=function(){E.innerHTML="New Link";$(H).append(E);B.add(E,B.elementHash.get(H))};G.AREA=G.EMBED=G.LINK=G.NOSCRIPT=G.PARAM=G.SOURCE=function(){$(H).append(E);B.add(E,B.elementHash.get(H))};G.ARTICLE=G.ASIDE=G.B=G.CANVAS=G.COMMAND=G.DD=G.DIV=G.DL=G.DT=G.EM=G.FIELDSET=G.FIGCAPTION=G.FIGURE=G.FOOTER=G.FORM=G.H1=G.H2=G.H3=G.H4=G.H5=G.H6=G.HEADER=G.HGROUP=G.I=G.LABEL=G.LEGEND=G.LI=G.NAV=G.Q=G.S=G.SECTION=G.SPAN=G.STRONG=G.STYLE=G.SUMMARY=G.TFOOT=G.U=function(){E.innerHTML="New "+F;$(H).append(E);B.add(E,B.elementHash.get(H))};G.AUDIO=G.VIDEO=function(){E.innerHTML="Your browser may not support this content.";$(E).attr("controls","controls");$(H).append(E);B.add(E,B.elementHash.get(H))};G.BASE=function(){$(E).attr("href","Enter URL");$(H).append(E);B.add(E,B.elementHash.get(H))};G.CAPTION=G.HEADER=G.LEGEND=function(){E.innerHTML="New "+F;$(H).prepend(E);B.pre(E,B.elementHash.get(H))};G.DETAILS=function(){E.innerHTML="New "+F;$(E).attr("open","open");$(H).append(E);B.add(E,B.elementHash.get(H))};G.IMG=function(){if(C==undefined||C.src==undefined){var I=B.returnPath+"builder/styles/images/noImg.jpg";B.setImage(E)}else{var I=C.src}E.setAttribute("src",I);$(H).append(E);B.add(E,B.elementHash.get(H))};G.INPUT=function(){$(E).attr("type","text");$(H).append(E);B.add(E,B.elementHash.get(H))};G.MAP=function(){$(H).after(E);B.add(E,B.elementHash.get(H))};G.MENU=G.UL=G.OL=function(){var I=document.createElement("li");I.innerHTML="New list";$(E).append(I);$(H).append(E);B.add(E,B.elementHash.get(H))};G.OBJECT=function(){var I=document.createElement("embed");$(I).attr({src:"builder/styles/images/embed.png",height:"50",width:"50"});E.setAttribute("width","50");E.setAttribute("height","50");$(E).append(I);$(H).append(E);B.add(E,B.elementHash.get(H))};G.P=function(){E.innerHTML="New Paragraph";$(H).append(E);B.add(E,B.elementHash.get(H))};G.PARAM=function(){$(H).append(E);B.add(E,B.elementHash.get(H))};G.TABLE=function(){var K=document.createElement("tbody");var J=document.createElement("tr");var I=document.createElement("td");I.innerHTML="New table";$(E).append(K);$(K).append(J);$(J).append(I);$(H).append(E);B.add(E,B.elementHash.get(H))};G.TD=function(){E.innerHTML="New column";$(H).append(E);B.add(E,B.elementHash.get(H))};G.TH=function(){E.innerHTML="Table header";if($(H).find("thead").length!=0){$(H).find("thead").prepend(E);B.pre(E,B.elementHash.get($(H).find("thead").get(0)))}else{var J=document.createElement("thead");var I=document.createElement("tr").appendChild(E);$(J).append(I);$(H).prepend(J);B.pre(J,B.elementHash.get(H))}};G.TR=function(){var I=document.createElement("td");I.innerHTML="New row";$(E).append(I);$(H).append(E);B.add(E,B.elementHash.get(H))};if(typeof G[E.nodeName]=="function"){G[E.nodeName]()}else{return false}for(var D in C){if(D=="cssClass"){$(E).addClass(C[D])}else{if(C[D]!=undefined){$(E).attr(D,C[D])}}}return E};A.prototype.deleteElement=function(C){var B=C.cloneNode(true);$(C).add(this.elementHash.get(C)).empty().remove();return B};A.prototype.destroy=function(D){var B=this;if(!this.saved){if($("#saveDocPopup").length==0){var C='<form><fieldset style="margin: 10px;"><p>Save the current document?</p><input class="button" id="saveDoc" type="button" value="yes" /><input class="button" id="noSaveDoc" type="button" value="no" /></fieldset></form>';new Popup({id:"saveDocPopup",content:C,title:"Save Document",position:"average"});$("#saveDocPopup").find("input")[0].focus();document.getElementById("saveDoc").onclick=function(){if(B.editor){B.editor.saveContent(function(){B.save(E)})}else{B.save(E)}$("#saveDocPopup").fadeOut("fast",function(){$(this).empty().remove()})};document.getElementById("noSaveDoc").onclick=function(){E();$("#saveDocPopup").fadeOut("fast",function(){$(this).empty().remove()})}}}else{E()}function E(){if(B.preview){B.preview.close();B.preview=null;B.$preview=null}if(B.editor){B.editor.codemirror.sourceEditor=null;$(B.editor.codemirror.getWrapperElement()).unbind().empty().remove();B.editor.menu.destroy();B.editor.destroy();B.editor=null;B.$editor=null}var F=B.attributeEditors.length;while(F--){B.attributeEditors[F].close()}B.attributeEditors=null;var F=B.inlineEditors.length;while(F--){B.inlineEditors[F].close()}B.inlineEditors=null;B.winZindex=null;if(p.activeState===B){p.activeState=undefined}var F=p.groupZindex.length;while(F--){if(p.groupZindex[F]===B){p.groupZindex.splice(F,1)}}if(p.contextMenu.target===B){p.contextMenu.close()}if(p.sourceOutline.state===B){p.sourceOutline.clear()}p.revisionManager.clear();p.activePreview=undefined;p.deleteFile(B.workingDoc);d.remove(B.file)}};A.prototype.getDoctype=function(D){var B=this,C="",E=D.split("<html");E=E[0];match=E.indexOf("<!",0);if(match!=-1){matchClose=E.indexOf(">",match);if(matchClose!=-1){matchClose+=1;C=D.substring(match,matchClose)}}B.doctype=C};A.prototype.getServerSideScripts=function(E){var I=this,B=["<?"],F,C,D=B.length;while(D--){curPosition=0;F=undefined;while(F!=-1){F=E.indexOf(B[D],curPosition);if(F!=-1){C=E.indexOf("?>",F);if(C!=-1){C+=3;var J=E.slice(0,F);var G=E.slice(C);var H=E.substring(F,C);I.php.push(H);curPosition=J.length+H.length}else{curPosition=E.length}}}}};A.prototype.html=function(E,D){var C=this;if(C.isHTML&&!C.php.length&&!p.protectedMode){if(E=="clean"){var B=C.doctype+"\n<html>"+$(C.doc.firstChild).cleanWhitespace().cleanMarkup().html().replace(/&quot;/g,"'").replace(/<div([\s\S]*?)firebugversion([\s\S]*?)_firebugConsole([\s\S]*?)\/div>/gi,"")+"\n</html>"}else{if(E=="fast"){var B=C.doctype+"<html>"+$(C.doc.firstChild).html().replace(/&quot;/g,"'").replace(/<div([\s\S]*?)firebugversion([\s\S]*?)_firebugConsole([\s\S]*?)\/div>/gi,"")+"</html>"}else{var B=C.doctype+"<html>"+$(C.doc.firstChild).cleanWhitespace().html().replace(/&quot;/g,"'").replace(/<div([\s\S]*?)firebugversion([\s\S]*?)_firebugConsole([\s\S]*?)\/div>/gi,"")+"</html>"}}}else{var B=C.source}return B};A.prototype.linkAttributeEditor=function(B){var C=this;C.attributeEditors[C.attributeEditors.length]=B};A.prototype.linkDocumentPreview=function(C){var B=this;B.load(C.file)};A.prototype.linkInlineEditor=function(C){var B=this;B.inlineEditors[B.inlineEditors.length]=C};A.prototype.linkSourceEditor=function(B){var C=this;C.editor=B;C.$editor=C.editor.$};A.prototype.load=function(E){var C=this,B=E.split(p.root);C.loaded=false;if(B.length>1){E=B[1]}B=E.split("/");for(var D=0;D<B.length-1;D++){if(B[D]!=""){C.currentPath+=B[D]+"/";C.returnPath+="../"}}C.fileName=B[B.length-1];C.fileType=getFileType(C.fileName);if(C.fileType=="htm"||C.fileType=="html"||C.fileType=="php"){C.isHTML=true}if(C.fileType=="css"){C.isCSS=true}if(C.fileType=="js"){C.isJS=true}if(C.fileType=="php"){C.isPHP=true}B=E.split("?");E=B[0];if(E.charAt(0)!="/"){E="/"+E}if(C.currentDoc==undefined){C.currentDoc=uncacheSafe(E.substr(1))}else{C.lastDoc=C.currentDoc;C.currentDoc=uncacheSafe(E.substr(1));p.saveUI()}d.put(E,C);C.saved=true;C.file=E;C.lastWorkingDoc=C.workingDoc;C.lastPreviewDoc=C.previewDoc;C.workingDoc="/"+C.currentPath+"abs-working-doc-"+C.fileName.replace(/-/gi,"-!@h@!-").replace(/\./gi,"-!@p@!-")+"."+C.fileType;C.previewDoc="/"+C.currentPath+"abs-preview-doc-"+C.fileName.replace(/-/gi,"-!@h@!-").replace(/\./gi,"-!@p@!-")+"."+C.fileType;p.getFileContents(E,function(F){C.getServerSideScripts(F);C.getDoctype(F);C.source=F;p.setFileContents(encodeURIComponent(C.workingDoc),F,function(){C.update()})})};A.prototype.onload=function(C){var B=this;if(B.loaded){C()}else{B.loadQueue[B.loadQueue.length]=C}};A.prototype.positionElem=function(D,F,C,E){var B=this;if(C==undefined){$(D).add(B.elementHash.get(D)).css({position:F});$(D).addClass("abs-ui-draggable").draggable({stop:function(){$(B.elementHash.get(D)).css({left:$(D).css("left"),top:$(D).css("top")});$(D).removeClass("abs-ui-draggable");if(typeof E=="function"){E()}}})}else{$(D).add(B.elementHash.get(D)).css({position:F,left:C.left,top:C.top})}};A.prototype.pre=function(E,D){var B=this;var C=E.cloneNode(false);$(D).prepend(C);B.elementHash.put(E,C);B.elementHash.put(C,E);this.prependChildren(E,C)};A.prototype.prependChildren=function(D,C){var B=this;E(D,C);function E(I,H){for(var F=0;F<I.childNodes.length;F++){var G=I.childNodes[F].cloneNode(false);$(H).prepend(G);B.elementHash.put(I.childNodes[F],G);B.elementHash.put(G,I.childNodes[F]);if(I.childNodes.length>0){E(I.childNodes[F],G)}}}};A.prototype.replace=function(D,E){var B=this;var C=D.cloneNode(false);$(E).replaceWith(C);B.elementHash.put(D,C);B.elementHash.put(C,D);this.replaceChildren(D,C)};A.prototype.replaceChildren=function(D,C){var B=this;E(D,C);function E(I,H){for(var F=0;F<I.childNodes.length;F++){var G=I.childNodes[F].cloneNode(false);$(H).append(G);B.elementHash.put(I.childNodes[F],G);B.elementHash.put(G,I.childNodes[F]);if(I.childNodes.length>0){E(I.childNodes[F],G)}}}};A.prototype.replaceElements=function(D,C){var B=this;$(C).empty();this.appendChildren(D,C)};A.prototype.save=function(D){var B=this,C=B.html("clean");p.setFileContents(B.file,C,function(){B.saved=true;B.saveRevision(B.file,C);if(typeof D=="function"){D()}})};A.prototype.saveRevision=function(B,C,E){if(E==undefined){E=""}B=B.substr(1).replace(/-/gi,"-!@h@!-").replace(/\//gi,"-!@s@!-").replace(/\./gi,"-!@p@!-");var D="fn=revset&url="+B+"&content="+encodeURIComponent(C)+"&path="+E;p.createDir("/builder/backups/"+B,function(){$.ajax({type:"POST",url:"scripts/server/files.php",data:D,success:function(F){if(F=="Warning: You must be logged in to edit files."){p.restoreSession()}else{p.revisionManager.curRevision="";p.revisionManager.update()}}})})};A.prototype.setImage=function(E){var B=this;if($("#select_image_popup").length==0){var C='<form id="image_upload_form" method="post" enctype="multipart/form-data" action="scripts/server/upload.php?path=/styles/uploads/" style="margin: 10px;"><fieldset><label for="upload_image">Select Image to Upload:</label><input class="text_input" name="upload_image" id="upload_image" type="file" /><input class="button" name="insert_image_submit" type="submit" value="submit" /></fieldset><iframe id="upload_iframe" name="upload_iframe" src="" style="width: 100%; height: 40px; border: 0px solid #fff; margin: 0;"></iframe></form>';new Popup({id:"select_image_popup",content:C,title:"Select an Image",position:"average"});document.getElementById("image_upload_form").onsubmit=function(){document.getElementById("image_upload_form").target="upload_iframe";document.getElementById("upload_iframe").onload=D};function D(){B.execute({fn:"setImage",elem:E,img:B.returnPath+$("#upload_iframe").get(0).contentDocument.body.innerHTML});$("#select_image_popup").fadeOut("fast",function(){$(this).empty().remove()})}}};A.prototype.setZindex=function(){var B=p.groupZindex.length;while(B--){if(p.groupZindex[B]===this){p.groupZindex.splice(B,1)}}p.groupZindex[p.groupZindex.length]=this};A.prototype.update=function(F){var B=this,E=true,C=0;if(B.isHTML){var D=this.attributeEditors.length;while(D--){this.attributeEditors[D].close()}this.attributeEditors=[];if(p.sourceOutline.file==B.file){p.sourceOutline.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center")}if(k.get(B.file)==undefined){B.$frame=$("<iframe/>").css("display","none").appendTo(document.body);E=false}else{B.preview=k.get(B.file);B.$preview=B.preview.$;B.$frame=B.preview.$frame;$(B.preview.frame.contentWindow.document).unbind();C=B.preview.frame.contentWindow.document.body.scrollTop||B.preview.frame.contentWindow.document.documentElement.scrollTop;B.preview.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center")}B.frame=B.$frame.bind("load.once",function(){B.elementHash.clear();var J=B.$frame.get(0).contentWindow.document.documentElement,I=J.cloneNode(false),G;B.doc=document.createDocumentFragment();B.doc.appendChild(I);B.elementHash.put(J,I);B.elementHash.put(I,J);B.appendChildren(J,I);if(E){B.$frame.unbind("load.once")}else{B.$frame.unbind("load.once").remove()}B.loaded=true;if(p.sourceOutline.file==B.file){p.sourceOutline.update()}if(B.preview){B.preview.bindContextMenu();B.preview.bindInternalLinks();B.preview.bindWorkingDocs();B.preview.$handle.find(".open-menu").css("background","");$(B.preview.frame.contentWindow.document).find("html,body").scrollTop(C)}G=B.loadQueue.length;for(var H=0;H<G;H++){B.loadQueue[H]()}B.loadQueue=[];if(typeof F=="function"){F()}}).attr("src",".."+B.workingDoc).get(0)}else{B.elementHash.clear();B.loaded=true;l=B.loadQueue.length;for(var D=0;D<l;D++){B.loadQueue[D]()}B.loadQueue=[];if(typeof F=="function"){F()}}};A.prototype.execute=function(D,I,B){var C=this;switch(D.fn){case"toggleAdmin":$(D.elem).add(C.elementHash.get(D.elem)).toggleClass("abs-administrable-element");C.history.push(D);if(p.sourceOutline.file==C.file){p.sourceOutline.update()}if(C.editor!==undefined){C.editor.update()}break;case"createElem":D.elem=C.createElement(D.elem,D.parent);C.history.push(D);if(p.sourceOutline.file==C.file){p.sourceOutline.update()}if(C.editor!==undefined){C.editor.update()}break;case"pasteElem":var E=$(D.elem).clone().get(0);$(D.dest).append(E);C.add(E,C.elementHash.get(D.dest));D.elem=E;C.history.push(D);if(p.sourceOutline.file==C.file){p.sourceOutline.update()}if(C.editor!==undefined){C.editor.update()}break;case"deleteElem":D.parent=$(D.elem).parent().get(0);D.parentClone=$(D.elem).parent().get(0).cloneNode(true);D.elem=C.deleteElement(D.elem);C.history.push(D);if(p.sourceOutline.file==C.file){p.sourceOutline.update()}if(C.editor!==undefined){C.editor.update()}break;case"posElem":D.dest=$(D.elem).position();C.history.push(D);C.positionElem(D.elem,D.pos,undefined,function(){if(C.editor!==undefined){C.editor.update()}});break;case"resizeElem":D.dest={width:$(D.elem).width(),height:$(D.elem).height()};C.history.push(D);resizeElem(D.elem,undefined,function(){if(C.editor!==undefined){C.editor.update()}});break;case"setImage":var G=D.elem.src;D.elem.src=D.img;C.elementHash.get(D.elem).src=D.img;D.img=G;C.history.push(D);if(p.sourceOutline.file==C.file){p.sourceOutline.update()}if(C.editor!==undefined){C.editor.update()}break;case"editText":D.html=D.elem.innerHTML;C.history.push(D);D.elem.innerHTML=D.editor.body.innerHTML;$(D.elem).find("*").css("visibility","inherit");C.replaceElements(D.elem,C.elementHash.get(D.elem));$(D.frame).css({width:$(D.elem).outerWidth(),height:$(D.elem).outerHeight()});if(p.sourceOutline.file==C.file){p.sourceOutline.update()}if(C.editor!==undefined){C.editor.update()}break;case"editInnerHTML":var F=false;C.history.push(D);$(D.elem).html(D.editor.getValue());C.replaceElements(D.elem,C.elementHash.get(D.elem));if(p.sourceOutline.file==C.file){p.sourceOutline.update()}if(C.editor!==undefined){C.editor.update()}break;case"editInlineStyles":C.history.push(D);$(D.elem).add(C.elementHash.get(D.elem)).attr("style",D.editor.getValue().replace(/\r/gi,""));if(C.editor!==undefined){C.editor.update()}break;case"editAttribute":var H=C.elementHash.get(D.elem);D.oldContent=$(D.elem).attr(D.attribute);C.history.push(D);$(D.elem).add(C.elementHash.get(D.elem)).attr(D.attribute,D.content.replace(/\r/gi,""));C.elementHash.put(D.elem,H);if(p.sourceOutline.file==C.file){p.sourceOutline.update()}if(C.editor!==undefined){C.editor.update()}break;case"editSource":C.history.push(D);C.source=D.editor.getValue();p.setFileContents(C.workingDoc,C.source,function(J){switch(getFileType(D.file)){case"js":if(typeof B=="function"){B()}break;case"css":C.update(B);break;default:C.update(B);break}if(typeof I=="function"){I()}});break}this.saved=false};A.prototype.undo=function(C,F){var B=this;switch(C.fn){case"toggleAdmin":$(C.elem).add(B.elementHash.get(C.elem)).toggleClass("abs-administrable-element");if(p.sourceOutline.file==B.file){p.sourceOutline.update()}if(B.editor!==undefined){B.editor.update()}break;case"createElem":case"pasteElem":deleteElem(C.elem);if(p.sourceOutline.file==B.file){p.sourceOutline.update()}if(B.editor!==undefined){B.editor.update()}break;case"deleteElem":$(C.parent).replaceWith(C.parentClone);B.replace(C.parentClone,B.elementHash.get(C.parent));if(p.sourceOutline.file==B.file){p.sourceOutline.update()}if(B.editor!==undefined){B.editor.update()}break;case"posElem":B.positionElem(C.elem,C.pos,C.dest,B.updateEditors);if(B.editor!==undefined){B.editor.update()}break;case"resizeElem":resizeElem(C.elem,C.dest,B.updateEditors);if(B.editor!==undefined){B.editor.update()}break;case"setImage":C.elem.src=C.img;B.elementHash.get(C.elem).src=C.img;if(p.sourceOutline.file==B.file){p.sourceOutline.update()}if(B.editor!==undefined){B.editor.update()}break;case"editText":C.elem.innerHTML=C.html;C.editor.body.innerHTML=C.html;B.replaceElements(C.elem,B.elementHash.get(C.elem));$(C.frame).css({width:$(C.elem).width(),height:$(C.elem).height()});if(p.sourceOutline.file==B.file){p.sourceOutline.update()}if(B.editor!==undefined){B.editor.update()}break;case"editInlineStyles":var E=B.elementHash.get(C.elem);if(C.win.style.display!="none"){C.editor.setValue(C.content)}$(C.elem).add(B.elementHash.get(C.elem)).attr("style",C.content.replace(/\r/gi,""));B.elementHash.put(C.elem,E);C.setContent();if(B.editor!==undefined){B.editor.update()}break;case"editAttribute":$(C.elem).add(B.elementHash.get(C.elem)).attr(C.attribute,C.oldContent.replace(/\r/gi,""));if(p.sourceOutline.file==B.file){p.sourceOutline.update()}if(B.editor!==undefined){B.editor.update()}break;case"editInnerHTML":if(C.win.style.display!="none"){C.editor.setValue(C.content)}$(C.elem).html(phpDecode(C.content,absRawHTML()));B.replaceElements(C.elem,B.elementHash.get(C.elem));C.setContent();if(p.sourceOutline.file==B.file){p.sourceOutline.update()}if(B.editor!==undefined){B.editor.update()}break;case"editSource":if(C.win.style.display!="none"){C.editor.setValue(C.content)}B.source=C.content;p.setFileContents(B.workingDoc,C.content,D);C.setContent(C.content);function D(G){switch(getFileType(C.file)){case"js":break;case"css":B.update();break;default:B.update();break}}break}this.saved=false};A.prototype.updateCacheControl=function(){var C=this,D,B;for(D=0;(B=C.$frame.get(0).contentWindow.document.getElementsByTagName("link")[D]);D++){B.href=cacheSafePath(uncacheSafe(B.href))}for(D=0;(B=C.$frame.get(0).contentWindow.document.getElementsByTagName("script")[D]);D++){if(B.src!=""){B.src=cacheSafePath(uncacheSafe(B.src))}}};A.prototype.updateInternalUI=function(){var B=this};return A})();var i=(function(){A.Inherits(Window);function A(C,D){if(D==undefined){D=p.desktop}var E=this,B,G;E.curDir="/";E.directories={};E.name="fileManager";E.menuClosed=true;E.preview=true;E.clipboard=[];E.selection=[];E.clickTimer;E.clickedOnce=false;E.window=$("<div/>").attr("id","absFileManager").addClass("window abs-ui").appendTo(D).get(0);E.$wrapper=$("<div/>").attr("id","absFileManagerWrapper").addClass("content abs-ui").appendTo(E.window);E.wrapper=E.$wrapper.get(0);var F=new Menu({newFile:{content:'<span class="abs-menu-newFile"></span>New File'},newFolder:{content:'<span class="abs-menu-newDir"></span>New Folder'},upload:{content:'<span class="abs-menu-upload"></span>Upload'},close:{content:'<span class="abs-menu-delete"></span>Close',click:function(){E.close()}},insert:"<hr />",options:{content:'<span class="abs-menu-options"></span>Options',mouseover:function(){var H=$(this).children(".ui-submenu");clearTimeout(G);H.css("display","block");if(H.offset().top+H.outerHeight()>$window.height()){H.css({top:H.position().top-((H.offset().top+H.outerHeight())-$window.height())})}H.css({left:$(this).parent().width()})},mouseout:function(){var H=this;G=setTimeout(function(){$(H).children(".ui-submenu").fadeOut("fast");H=null},500)},children:{previewToggle:{content:function(){return E.preview?"<span class='abs-menu-check'></span>preview":"<span class='abs-menu-blank'></span>preview"},click:function(){E.preview=!E.preview;if(E.preview){$(this).find("span").attr("class","abs-menu-check")}else{$(this).find("span").attr("class","abs-menu-blank")}E.update();p.saveUI()}}}}});F.$.addClass("window-menu").mouseenter(function(){clearTimeout(B)}).mouseleave(function(){B=setTimeout(function(){E.$menu.hide();E.menuClosed=true},500)});E.options({selector:E.window,title:"<div class='abs-fileManager-icon'></div>File Manager",taskbar:C,top:20,dragstop:E.saveUI,resizestop:E.saveUI,minimize:E.saveUI,unminimize:E.saveUI,maximize:false,menu:F,openmenu:E.toggleMenu,focus:E.onfocus});E.update();E.focus()}A.prototype.bindContextMenu=function(){var B=this;B.$wrapper.bind("contextmenu",B.oncontextmenu)};A.prototype.click=function(D){var E=this,B=$(D);if(p.input.ctrl||p.input.shift){if(B.hasClass("abs-fileManager-selectedFile")){B.removeClass("abs-fileManager-selectedFile");var C=E.selection.length;while(C--){if(E.selection[C]==D.id){E.selection.splice(C,1)}}}else{B.addClass("abs-fileManager-selectedFile");E.selection[E.selection.length]=D.id}}else{E.$wrapper.find(".abs-fileManager-selectedFile").removeClass("abs-fileManager-selectedFile");E.selection=[];B.addClass("abs-fileManager-selectedFile");E.selection[E.selection.length]=D.id}};A.prototype.dblclickDirectory=function(D){var E=this,B=$(D),F=B.attr("id")+"/",C=B.next();C.css("display","none");E.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");E.loadDirectory(F,C,function(){B.find(".abs-toggle").attr("src","styles/images/hidechildren.png");C.slideDown("fast");E.directories[F]=true;E.$handle.find(".open-menu").css("background","");B=null;F=null;C=null});E.$wrapper.find(".abs-fileManager-selectedFile").removeClass("abs-fileManager-selectedFile");E.selection=[];B.unbind("click").click(function(){var G=this;if(E.clickedOnce){E.clickedOnce=false;clearTimeout(E.clickTimer);E.dblclickLoadedDirectory(G)}else{E.clickedOnce=true;E.clickTimer=setTimeout(function(){E.clickedOnce=false;E.click(G)},200)}})};A.prototype.dblclickLoadedDirectory=function(C){var D=this,B=$(C),E=B.attr("id")+"/";if(B.next().css("display")=="none"){B.next().slideDown("fast");B.find(".abs-toggle").attr("src","styles/images/hidechildren.png");D.directories[E]=true}else{B.next().slideUp("fast");B.find(".abs-toggle").attr("src","styles/images/showchildren.png");D.directories[E]=false}D.$wrapper.find(".abs-fileManager-selectedFile").removeClass("abs-fileManager-selectedFile");D.selection=[]};A.prototype.dblclickArchive=function(B){fileManager.$wrapper.find(".abs-fileManager-selectedFile").removeClass("abs-fileManager-selectedFile");fileManager.selection=[]};A.prototype.dblclickAudio=function(B){fileManager.$wrapper.find(".abs-fileManager-selectedFile").removeClass("abs-fileManager-selectedFile");fileManager.selection=[]};A.prototype.dblclickFile=function(F){var G=this,C=$(F),D=C.attr("id"),E=D.split("?")[0],B=c.get(E);if(B==undefined){new n(D,p.taskbar)}else{B.focus()}G.$wrapper.find(".abs-fileManager-selectedFile").removeClass("abs-fileManager-selectedFile");G.selection=[]};A.prototype.dblclickFlash=function(B){fileManager.$wrapper.find(".abs-fileManager-selectedFile").removeClass("abs-fileManager-selectedFile");fileManager.selection=[]};A.prototype.dblclickHTML=function(G){var H=this,C=$(G),E=C.attr("id"),F=E.split("?")[0],D=k.get(F),B=c.get(F);if(D==undefined){new u(E,p.taskbar)}else{D.focus()}if(B==undefined){new n(E,p.taskbar)}else{B.focus()}H.$wrapper.find(".abs-fileManager-selectedFile").removeClass("abs-fileManager-selectedFile");H.selection=[]};A.prototype.dblclickImage=function(B){fileManager.$wrapper.find(".abs-fileManager-selectedFile").removeClass("abs-fileManager-selectedFile");fileManager.selection=[]};A.prototype.dblclickVideo=function(B){fileManager.$wrapper.find(".abs-fileManager-selectedFile").removeClass("abs-fileManager-selectedFile");fileManager.selection=[]};A.prototype.generateFileItem=function(G,D,K){var B=this,F="abs-fileManager-div";if(K.hasClass("abs-fileManager-div")){F="abs-fileManager-alt"}if(D!="."&&D!=".."&&D!="builder"&&D!="admin"&&D!="cms"&&D.slice(0,16)!="abs-working-doc-"){var H=$("<div/>").attr("id",G+D).addClass(F).html(D).appendTo(K);var L=getFileType(D);switch(L){case"dir":var C=G+D+"/";var E=$("<div/>").attr("class","abs-child-wrapper "+F).css("display","none").css("padding-left",10).appendTo(K);var J=$("<img/>");J.addClass("abs-toggle");H.prepend("<span class='directory'></span>");if(B.directories[C]==true){J.attr("src","styles/images/hidechildren.png").prependTo(H);H.click(function(){var M=this;if(B.clickedOnce){B.clickedOnce=false;clearTimeout(B.clickTimer);B.dblclickLoadedDirectory(M)}else{B.clickedOnce=true;B.clickTimer=setTimeout(function(){B.clickedOnce=false;B.click(M)},200)}});B.loadDirectory(C,E)}else{J.attr("src","styles/images/showchildren.png").prependTo(H);H.click(function(){var M=this;if(B.clickedOnce){B.clickedOnce=false;clearTimeout(B.clickTimer);B.dblclickDirectory(M)}else{B.clickedOnce=true;B.clickTimer=setTimeout(function(){B.clickedOnce=false;B.click(M)},200)}})}E=null;J=null;break;case"zip":case"rar":case"7z":var C=G+D+"/";H.css("padding-left",10).click(function(){var M=this;if(B.clickedOnce){B.clickedOnce=false;clearTimeout(B.clickTimer);B.dblclickArchive(M)}else{B.clickedOnce=true;B.clickTimer=setTimeout(function(){B.clickedOnce=false;B.click(M)},200)}}).prepend("<span class='directory'></span>");break;case"html":case"htm":case"php":case"php5":case"pl":case"phtml":case"shtml":var I;H.css("padding-left",10).click(function(){var M=this;if(B.clickedOnce){B.clickedOnce=false;clearTimeout(B.clickTimer);B.dblclickHTML(M)}else{B.clickedOnce=true;B.clickTimer=setTimeout(function(){B.clickedOnce=false;B.click(M)},200)}}).prepend("<span class='file"+L+"'></span>");if(B.preview){H.hover(function(){var P=document.createElement("iframe");P.setAttribute("style","width: 1024px; height: 768px;");if(parseFloat($(B.selector).offset().left)<$(window).width()/2){var R=$("#absFileManager").width()+20;var O=""}else{var R="";var O=$("#absFileManager").width()+20}if(parseFloat($(B.selector).offset().top)<$(window).height()/2){var Q=$("#absFileManagerWrapper").position().top;var M=""}else{var Q="";var M=20}I=$("<div/>").appendTo("#absFileManagerWrapper").addClass("abs-file-preview").css({position:"absolute",left:R,right:O,top:Q,bottom:M,width:500,height:500}).append(P);var N=".."+B.curDir+$(this).attr("id");P.src=N},function(){I.empty().remove()})}break;case"jpeg":case"jpg":case"gif":case"png":case"bmp":var I;H.css("padding-left",10).click(function(){var M=this;if(B.clickedOnce){B.clickedOnce=false;clearTimeout(B.clickTimer);B.dblclickImage(M)}else{B.clickedOnce=true;B.clickTimer=setTimeout(function(){B.clickedOnce=false;B.click(M)},200)}}).prepend("<span class='image'></span>");if(B.preview){H.hover(function(){if(parseFloat($(B.selector).offset().left)<$(window).width()/2){var P=$("#absFileManager").width()+20;var N=""}else{var P="";var N=$("#absFileManager").width()+20}if(parseFloat($(B.selector).offset().top)<$(window).height()/2){var O=$("#absFileManagerWrapper").position().top;var M=""}else{var O="";var M=20}I=$("<div/>").appendTo("#absFileManagerWrapper").addClass("abs-file-preview").css({position:"absolute",left:P,right:N,top:O,bottom:M,width:500,height:500}).append("<img src='.."+B.curDir+$(this).attr("id")+"' alt='Preview of "+$(this).attr("id")+"' />")},function(){I.empty().remove()})}break;case"swf":H.css("padding-left",10).click(function(){var M=this;if(B.clickedOnce){B.clickedOnce=false;clearTimeout(B.clickTimer);B.dblclickFlash(M)}else{B.clickedOnce=true;B.clickTimer=setTimeout(function(){B.clickedOnce=false;B.click(M)},200)}}).prepend("<span class='file"+L+"'></span>");break;case"mpeg":case"avi":case"mov":H.css("padding-left",10).click(function(){var M=this;if(B.clickedOnce){B.clickedOnce=false;clearTimeout(B.clickTimer);B.dblclickVideo(M)}else{B.clickedOnce=true;B.clickTimer=setTimeout(function(){B.clickedOnce=false;B.click(M)},200)}}).prepend("<span class='fileswf'></span>");break;case"mp3":case"mp4":case"wav":case"ogg":case"midi":H.css("padding-left",10).click(function(){var M=this;if(B.clickedOnce){B.clickedOnce=false;clearTimeout(B.clickTimer);B.dblclickAudio(M)}else{B.clickedOnce=true;B.clickTimer=setTimeout(function(){B.clickedOnce=false;B.click(M)},200)}}).prepend("<span class='fileswf'></span>");break;case"js":case"css":case"txt":case"xml":var I;H.css("padding-left",10).click(function(){var M=this;if(B.clickedOnce){B.clickedOnce=false;clearTimeout(B.clickTimer);B.dblclickFile(M)}else{B.clickedOnce=true;B.clickTimer=setTimeout(function(){B.clickedOnce=false;B.click(M)},200)}}).prepend("<span class='file"+L+"'></span>");if(B.preview){H.hover(function(){if(parseFloat($(B.selector).offset().left)<$(window).width()/2){var P=$("#absFileManager").width()+20;var N=""}else{var P="";var N=$("#absFileManager").width()+20}if(parseFloat($(B.selector).offset().top)<$(window).height()/2){var O=$("#absFileManagerWrapper").position().top;var M=""}else{var O="";var M=20}I=$("<div/>").appendTo("#absFileManagerWrapper").addClass("abs-file-preview").css({position:"absolute",left:P,right:N,top:O,bottom:M,padding:5,width:500,height:500});getFileContents(B.curDir+$(this).attr("id"),false,function(Q){I.html(text2html(Q))})},function(){I.empty().remove()})}break;default:var I;H.css("padding-left",10).click(function(){var M=this;if(B.clickedOnce){B.clickedOnce=false;clearTimeout(B.clickTimer);B.dblclickFile(M)}else{B.clickedOnce=true;B.clickTimer=setTimeout(function(){B.clickedOnce=false;B.click(M)},200)}}).prepend("<span class='filetxt'></span>");break}return H}return false};A.prototype.loadDirectory=function(C,D,F){var E=this;p.getDirContents(C,B);function B(H){D.empty();H=H.split(",");for(var G in H){E.generateFileItem(C,H[G],D)}if(typeof F=="function"){F.call(E)}}};A.prototype.oncontextmenu=function(D){var E,B;D=window.event||D;if(D.stopPropagation){D.stopPropagation()}else{D.cancelBubble=true}var C=D.target!=null?D.target:D.srcElement;if(C===p.fileManager.wrapper){C="none"}else{C=$(C).closest("div").attr("id")}if(D.pageX!=undefined){E=D.pageX;B=D.pageY}else{E=D.clientX;B=D.clientY}if(p.contextMenu.file(C)){if(B+p.contextMenu.$.outerHeight()>$window.height()){B=$window.height()-p.contextMenu.$.outerHeight()}p.contextMenu.$.css({display:"none",left:E+"px",top:B+"px"}).fadeIn("fast")}D.preventDefault();return false};A.prototype.onfocus=function(){var B=this;p.updateGroupFocus(B)};A.prototype.saveUI=function(){p.saveUI()};A.prototype.setZindex=function(){var B=p.groupZindex.length;while(B--){if(p.groupZindex[B]===this){p.groupZindex.splice(B,1)}}p.groupZindex[p.groupZindex.length]=this};A.prototype.toggleMenu=function(){var B=this;if(B.menuClosed){B.$menu.show();B.menuClosed=false}else{B.$menu.hide();B.menuClosed=true}};A.prototype.update=function(){var B=this;B.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");B.$wrapper.empty();B.loadDirectory("/",B.$wrapper,function(){B.bindContextMenu();B.$handle.find(".open-menu").css("background","")})};return A})();var r=(function(){A.Inherits(Window);function A(D,C,I,G,L){if(L==undefined){L=p.desktop}var F=this,H,M,E=false;F.$=$("<div/>").attr("class","window abs-inlineEditor-ui abs-ui").css("display","none").appendTo(L);F.window=F.$.get(0);F.menuClosed=true;F.autosave=true;this.name="inlineEditor";var B=new Menu({save:{content:'<span class="abs-menu-refresh"></span>Update<span class="abs-menu-buffer"></span><span class="abs-menu-shortcut">CTRL+R</span>',click:function(){F.saveContent()}},close:{content:'<span class="abs-menu-windowClose"></span>Close',click:function(){F.close()}},insert:"<hr/>",options:{content:"<span class='abs-menu-windowOptions'></span>Options",mouseover:function(){var N=$(this).children(".ui-submenu");clearTimeout(M);N.css("display","block");if(N.offset().top+N.outerHeight()>$window.height()){N.css({top:N.position().top-((N.offset().top+N.outerHeight())-$window.height())})}N.css({left:$(this).parent().width()})},mouseout:function(){var N=this;M=setTimeout(function(){$(N).children(".ui-submenu").fadeOut("fast");N=null},500)},children:{codemirror1:{content:"<span class='abs-menu-blank'></span>codemirror 1",styles:"color: gray"},codemirror2:{content:"<span class='abs-menu-blank'></span>codemirror 2",styles:"color: gray"},autosaveToggle:{content:function(){return p.autosave?"<span class='abs-menu-check'></span>autoupdate":"<span class='abs-menu-blank'></span>autoupdate"},click:function(){p.autosave=!p.autosave;if(p.autosave){$(".window-menu > .options .autosaveToggle").find("span").attr("class","abs-menu-check")}else{$(".window-menu > .options .autosaveToggle").find("span").attr("class","abs-menu-blank")}p.saveUI()}},dockable:{content:function(){return p.editorsDockable?"<span class='abs-menu-check'></span>dockable":"<span class='abs-menu-blank'></span>dockable"},click:function(){p.editorsDockable=!p.editorsDockable;if(p.editorsDockable){f.each(function(N,O){O.dockable=true});c.each(function(N,O){O.dockable=true});$(".window-menu > .options .dockable span").attr("class","abs-menu-check")}else{f.each(function(N,O){O.dockable=false});c.each(function(N,O){O.dockable=false});s;$(".window-menu > .options .dockable span").attr("class","abs-menu-blank")}p.saveUI()}}}}});B.$.addClass("window-menu").mouseenter(function(){clearTimeout(H)}).mouseleave(function(){H=setTimeout(function(){F.$menu.hide();F.menuClosed=true},500)});if(p.activeState&&p.activeState.editor){var K=parseInt(p.activeState.editor.left())+20;var J=parseInt(p.activeState.editor.top())+20;if(p.activeState.editor.isMaximized){E=true}}else{var K=220;var J=40}F.options({selector:this.window,title:"<div class='abs-inlineEditor-icon'></div>Empty document",taskbar:G,left:K,top:J,attachedWidth:600,dragstop:p.saveUI,resizestop:F.updateCodemirror,minimize:p.updateCodemirror,unminimize:p.updateCodemirror,maximize:F.updateCodemirror,unmaximize:F.updateCodemirror,menu:B,openmenu:F.toggleMenu,focus:F.onfocus});if(E){F.maximize(false)}else{F.checkBounds()}F.open();F.load(D,C,I);F.focus()}A.prototype.close=function(){var B=this.state.inlineEditors.length;while(B--){if(this.state.inlineEditors[B]===this){this.state.inlineEditors.splice(B,1)}}f.remove(this.elem);var B=this.state.winZindex.length;while(B--){if(this.state.winZindex[B]===this){this.state.winZindex.splice(B,1)}}this.codemirror.inlineEditor=undefined;this.menu.destroy();this.destroy()};A.prototype.codemirrorFocus=function(){this.focus();p.docClick()};A.prototype.getStyles=function(B){return $(B).attr("style")};A.prototype.getHTML=function(B){return $(B).html()};A.prototype.keyEvent=function(C,E){var B=C.inlineEditor,D=(E.keyCode!=undefined)?E.keyCode:(E.charCode!=undefined)?E.charCode:E.which;clearTimeout(B.keyEventTimer);if((D==83||D==82)&&E.ctrlKey){if(window.isIE){C.stop()}B.saveContent();E.preventDefault();return false}else{if(E.type=="keyup"&&p.autosave){B.keyEventTimer=setTimeout(function(){B.saveContent.call(B)},1000)}}};A.prototype.load=function(C,E,B){var D=this;D.setSource(E);D.file=C;D.attr=B;D.state=d.get(C);if(D.state==undefined){D.state=new t(C)}D.state.linkInlineEditor(D);D.state.onload(function(){var F={lineNumbers:true,tabMode:"shift",onKeyEvent:D.keyEvent};switch(B){case"onclick":case"onmouseover":case"onmouseout":case"onload":case"onunload":F.mode="javascript";F.value="";D.fn="editInlineEvents";D.getContent=function(){};D.title="<div class='abs-inlineEditor-icon'></div>Editing: &lt;"+E.nodeName+"&gt;'s Events";break;case"style":F.mode="css";F.value=D.getStyles(E);D.fn="editInlineStyles";D.getContent=D.getStyles;D.title="<div class='abs-inlineEditor-icon'></div>Editing: &lt;"+E.nodeName+"&gt;'s Styles";break;case"html":F.mode="htmlmixed";F.value=D.getHTML(E);D.fn="editInnerHTML";D.getContent=D.getHTML;D.title="<div class='abs-inlineEditor-icon'></div>Editing: &lt;"+E.nodeName+"&gt;'s InnerHTML";break;default:D.title="Editor";break}D.setTitle(D.title);if(D.codemirror!=undefined){$(D.codemirror.wrapping).empty().remove()}D.codemirror=new CodeMirror(D.window,F);D.codemirror.inlineEditor=D;F=null;D.update()})};A.prototype.onfocus=function(){var C=this,B;if(p.activeState!=C.state){p.activeState=C.state;p.sourceOutline.load(C.file);p.revisionManager.load(C.file)}p.updateGroupFocus(C)};A.prototype.saveContent=function(){var B=this;B.state.execute({fn:B.fn,elem:B.elem,content:B.content,setContent:B.setContent,editor:B.codemirror,win:B.window});B.content=B.codemirror.getValue()};A.prototype.setContent=function(B){this.content=B};A.prototype.setSource=function(C){var B=this;if(B.elem!=undefined){f.remove(B.file)}B.elem=C;f.put(B.elem,B)};A.prototype.setZindex=function(){var B=this.state.winZindex.length;while(B--){if(this.state.winZindex[B]===this){this.state.winZindex.splice(B,1)}}this.state.winZindex[this.state.winZindex.length]=this};A.prototype.toggleMenu=function(){if(this.menuClosed){this.menu.$.show();this.menuClosed=false}else{this.menu.$.hide();this.menuClosed=true}};A.prototype.update=function(){var B=this;B.content=B.getContent(B.elem);B.codemirror.setValue(B.content)};A.prototype.updateCodemirror=function(){this.codemirror.refresh();p.saveUI()};return A})();var m=(function(){A.Inherits(Window);function A(D,C,E){E=E||p.desktop;var H=this,B,G;H.name="revisionManager";H.file;H.directories={};H.curRevision;H.menuClosed=true;H.isHidden=true;H.selection=[];H.clickedOnce=false;H.window=$("<div/>").attr({id:"absRevisionManager",style:"display: none;"}).addClass("window abs-ui").appendTo(E).get(0);H.$wrapper=$("<div/>").attr("id","absRevisionManagerWrapper").addClass("content abs-ui").appendTo(H.window);H.wrapper=H.$wrapper.get(0);var F=new Menu({newRevision:{content:'<span class="abs-menu-save"></span>New Revision',click:function(){H.state.save()}},close:{content:'<span class="abs-menu-delete"></span>Close',click:function(){H.close()}},insert:"<hr />",options:{content:'<span class="abs-menu-options"></span>Options',styles:"color: gray;"}});F.$.addClass("window-menu").mouseenter(function(){clearTimeout(B)}).mouseleave(function(){B=setTimeout(function(){H.$menu.hide();H.menuClosed=true},500)});H.options({selector:H.window,title:"<div class='abs-revisionManager-icon'></div>Revisions",taskbar:C,top:20,dragstop:H.saveUI,resizestop:H.saveUI,minimize:H.saveUI,unminimize:H.saveUI,maximize:false,menu:F,openmenu:H.toggleMenu,focus:H.onfocus});if(D!=undefined){H.load(D)}H.focus()}A.prototype.bindContextMenu=function(){var B=this;B.$wrapper.bind("contextmenu",B.oncontextmenu)};A.prototype.clear=function(){this.state=undefined;this.$wrapper.unbind().empty();this.$.css("display","none");this.isHidden=true};A.prototype.click=function(D){var E=this,B=$(D);if(p.input.ctrl||p.input.shift){if(B.hasClass("abs-revisionManager-selectedFile")){B.removeClass("abs-revisionManager-selectedFile");var C=E.selection.length;while(C--){if(E.selection[C]==D.id){E.selection.splice(C,1)}}}else{B.addClass("abs-revisionManager-selectedFile");E.selection[E.selection.length]=D.id}}else{E.$wrapper.find(".abs-revisionManager-selectedFile").removeClass("abs-revisionManager-selectedFile");E.selection=[];B.addClass("abs-revisionManager-selectedFile");E.selection[E.selection.length]=D.id}};A.prototype.dblclickDirectory=function(D){var G=this,B=$(D),F=B,E=B.attr("id"),C=B.next();G.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");C.css("display","none");G.loadDirectory(E,C,function(){F.find(".abs-toggle").attr("src","styles/images/hidechildren.png");C.slideDown("fast");G.directories[E]=true;G.$handle.find(".open-menu").css("background","");F=null;E=null;C=null});B.unbind("click").click(function(){var H=this;if(G.clickedOnce){G.clickedOnce=false;clearTimeout(G.clickTimer);G.dblclickLoadedDirectory(H)}else{G.clickedOnce=true;G.clickTimer=setTimeout(function(){G.clickedOnce=false;G.click(H)},200)}})};A.prototype.dblclickLoadedDirectory=function(C){var E=this,B=$(C),D=B.attr("id")+"/";if(B.next().css("display")=="none"){B.next().slideDown("fast");B.find(".abs-toggle").attr("src","styles/images/hidechildren.png");E.directories[D]=true}else{B.next().slideUp("fast");B.find(".abs-toggle").attr("src","styles/images/showchildren.png");E.directories[D]=false}E.$wrapper.find(".abs-revisionManager-selectedFile").removeClass("abs-revisionManager-selectedFile");E.selection=[]};A.prototype.dblclickRevision=function(C){var F=this,B=$(C),E=C,D=F.state;F.curRevision=E.getAttribute("id");D.editor.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");p.getFileContents("/builder/backups/"+F.state.currentDoc.replace(/-/gi,"-!@h@!-").replace(/\//gi,"-!@s@!-").replace(/\./gi,"-!@p@!-")+F.curRevision,function(G){p.setFileContents(encodeURIComponent(F.state.workingDoc),G,function(){D.getServerSideScripts(G);D.getDoctype(G);D.source=G;D.update(function(){if(D.editor){D.editor.update()}D.editor.$handle.find(".open-menu").css("background","");D=null})})})};A.prototype.load=function(E){var F=this,B=E.split(p.root);if(B.length>1){E=B[1]}B=E.split("/");for(var D=0;D<B.length-1;D++){if(B[D]!=""){F.currentPath+=B[D]+"/";F.returnPath+="../"}}B=E.split("?");E=B[0];if(E.charAt(0)!="/"){E="/"+E}if(F.currentDoc==undefined){F.currentDoc=uncacheSafe(E.substr(1))}else{F.lastDoc=F.currentDoc;F.currentDoc=uncacheSafe(E.substr(1));p.saveUI()}F.file=E;F.state=d.get(E);F.update();F.$.css("display","block");F.isHidden=false;if(F.isAttached){var C=window.maximizedWindows.length;while(C--){window.maximizedWindows[C].maximize(true)}}};A.prototype.loadDirectory=function(C,E,G){var F=this,D=F.file;if(D.charAt(0)=="/"){D=D.substr(1)}p.getDirContents("/builder/backups/"+D.replace(/-/gi,"-!@h@!-").replace(/\//gi,"-!@s@!-").replace(/\./gi,"-!@p@!-")+C,B);function B(aa){aa=aa.split(",");var ab={},M={},P={},Q={};var S=[],M=[];var O=0,Y=0,J=0,T=0;for(var W in aa){if(aa[W]!="."&&aa[W]!=".."){var I=aa[W].replace(".backup","").split("-");if(I.length==2){var Z=new Date(I[0],I[1],O,Y,J,T);if(M[Z.toString()]==undefined){S.push(Z)}else{T++;S.push(new Date(I[0],I[1],O,Y,J,T))}M[S[S.length-1].toString()]="dir";P[S[S.length-1].toString()]=aa[W]}if(I.length==3){var Z=new Date(I[0],I[1]-1,O,Y,J,T);if(M[Z.toString()]==undefined){S.push(Z)}else{T++;S.push(new Date(I[0],I[1]-1,O,Y,J,T))}M[S[S.length-1].toString()]="dir";ab[S[S.length-1].toString()]=I[2];P[S[S.length-1].toString()]=aa[W]}if(I.length==6){S.push(new Date(I[0],I[1]-1,I[2],I[3],I[4],I[5]));M[S[S.length-1].toString()]="rev";P[S[S.length-1].toString()]=aa[W]}if(I.length==7){S.push(new Date(I[0],I[1]-1,I[2],I[3],I[4],I[5]));M[S[S.length-1].toString()]=I[6];P[S[S.length-1].toString()]=aa[W]}}}S.sort(dateSortDesc);E.empty();for(var W in S){var X="abs-revisionManager-div";if(E.hasClass("abs-revisionManager-div")){X="abs-revisionManager-alt"}if(M[S[W].toString()]=="dir"){var K=C+"/"+P[S[W].toString()];if(ab[S[W].toString()]!=undefined){var V='<span class="directory"></span>'+ab[S[W].toString()]}else{var V=S[W].toDateString().split(" ");V='<span class="directory"></span>'+V[1]+" "+V[3]}var U=$("<div/>").attr("id",K).addClass(X).html(V).get(0);E.append(U);var L=$("<div/>").attr("class","abs-child-wrapper "+X).css("display","block").css("padding-left",10).appendTo(E);var N=$("<img/>").addClass("abs-toggle").prependTo(U);if(F.directories[K]==true){N.attr("src","styles/images/hidechildren.png");$(U).click(function(){var ac=this;if(F.clickedOnce){F.clickedOnce=false;clearTimeout(F.clickTimer);F.dblclickLoadedDirectory(ac)}else{F.clickedOnce=true;F.clickTimer=setTimeout(function(){F.clickedOnce=false;F.click(ac)},200)}});F.loadDirectory(K,L)}else{N.attr("src","styles/images/showchildren.png");$(U).click(function(){var ac=this;if(F.clickedOnce){F.clickedOnce=false;clearTimeout(F.clickTimer);F.dblclickDirectory(ac)}else{F.clickedOnce=true;F.clickTimer=setTimeout(function(){F.clickedOnce=false;F.click(ac)},200)}})}U=null;N=null;V=null;K=null}else{var R=C+"/"+P[S[W].toString()];var V=S[W].toString().split(" GMT");V='<span class="filetxt"></span>'+V[0];var H=$("<div/>").attr({id:R,style:"padding-left: 10px;"}).addClass(X).get(0);if(F.curRevision==R){$(H).addClass("abs-selected-revision")}if(M[S[W].toString()]=="rev"){H.innerHTML=V}else{H.innerHTML='<span class="filepl"></span>'+M[S[W].toString()]}$(H).bind("click",function(){var ac=this;if(F.clickedOnce){F.clickedOnce=false;clearTimeout(F.clickTimer);F.dblclickRevision(ac)}else{F.clickedOnce=true;F.clickTimer=setTimeout(function(){F.clickedOnce=false;F.click(ac)},200)}});E.append(H)}}if(typeof G=="function"){G.call(F)}}};A.prototype.oncontextmenu=function(D){var E,B;D=window.event||D;if(D.stopPropagation){D.stopPropagation()}else{D.cancelBubble=true}var C=D.target!=null?D.target:D.srcElement;if(C===p.revisionManager.wrapper){C="none"}else{C=$(C).closest("div").attr("id")}if(D.pageX!=undefined){E=D.pageX;B=D.pageY}else{E=D.clientX;B=D.clientY}if(p.contextMenu.revision(C)){if(B+p.contextMenu.$.outerHeight()>$window.height()){B=$window.height()-p.contextMenu.$.outerHeight()}p.contextMenu.$.css({display:"none",left:E+"px",top:B+"px"}).fadeIn("fast")}D.preventDefault();return false};A.prototype.onfocus=function(){var B=this;p.updateGroupFocus(B)};A.prototype.saveUI=function(){p.saveUI()};A.prototype.setEvents=function(){var B=this;B.$wrapper.get(0).oncontextmenu=function(C){C=window.event||C;if(C.stopPropagation){C.stopPropagation()}else{C.cancelBubble=true}p.openRevisionMenu(C,"none");return false}};A.prototype.setZindex=function(){var B=p.groupZindex.length;while(B--){if(p.groupZindex[B]===this){p.groupZindex.splice(B,1)}}p.groupZindex[p.groupZindex.length]=this};A.prototype.toggleMenu=function(){var B=this;if(B.menuClosed){B.$menu.show();B.menuClosed=false}else{B.$menu.hide();B.menuClosed=true}};A.prototype.update=function(){var B=this;B.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");B.$wrapper.unbind().empty();B.loadDirectory("",B.$wrapper,function(){if(B.$wrapper.html()==""){B.state.saveRevision(B.state.file,B.state.html("clean"))}else{B.bindContextMenu();B.$handle.find(".open-menu").css("background","")}})};return A})();var n=(function(){A.Inherits(Window);function A(D,G,B,K){K=K||p.desktop;B=B||{};if(D.charAt(0)!="/"){D="/"+D}var L=this,F,H,M,E=false;L.content="";L.autosave=true;L.menuClosed=true;L.linkedPreviews={};L.window=$("<div/>").attr("class","window abs-sourceEditor-ui abs-ui").css("display","none").appendTo(K).get(0);this.name="sourceEditor";var C=new Menu({update:{content:'<span class="abs-menu-refresh"></span>Update<span class="abs-menu-buffer"></span><span class="abs-menu-shortcut">CTRL+R</span>',click:function(){L.saveContent()}},save:{content:'<span class="abs-menu-windowSave"></span>Save<span class="abs-menu-buffer"></span><span class="abs-menu-shortcut">CTRL+S</span>',click:function(){if(p.autosave){L.state.save(function(){if(L.state.isJS){for(var N in L.linkedPreviews){L.linkedPreviews[N].refresh()}}})}else{L.saveContent(function(){L.state.save(function(){if(L.state.isJS){for(var N in L.linkedPreviews){L.linkedPreviews[N].refresh()}}})})}}},close:{content:'<span class="abs-menu-windowClose"></span>Close',click:function(){L.close()}},insert:"<hr/>",options:{content:"<span class='abs-menu-windowOptions'></span>Options",mouseover:function(){var N=$(this).children(".ui-submenu");clearTimeout(M);N.css("display","block");if(N.offset().top+N.outerHeight()>$window.height()){N.css({top:N.position().top-((N.offset().top+N.outerHeight())-$window.height())})}N.css({left:$(this).parent().width()})},mouseout:function(){var N=this;M=setTimeout(function(){$(N).children(".ui-submenu").fadeOut("fast");N=null},500)},children:{codemirror1:{content:"<span class='abs-menu-blank'></span>codemirror 1",styles:"color: gray"},codemirror2:{content:"<span class='abs-menu-blank'></span>codemirror 2",styles:"color: gray"},autosaveToggle:{content:function(){return p.autosave?"<span class='abs-menu-check'></span>autoupdate":"<span class='abs-menu-blank'></span>autoupdate"},click:function(){p.autosave=!p.autosave;if(p.autosave){$(".window-menu > .options .autosaveToggle").find("span").attr("class","abs-menu-check")}else{$(".window-menu > .options .autosaveToggle").find("span").attr("class","abs-menu-blank")}p.saveUI()}},protectedMode:{content:function(){return p.protectedMode?"<span class='abs-menu-check'></span>protected mode":"<span class='abs-menu-blank'></span>protected mode"},click:function(){p.protectedMode=!p.protectedMode;if(p.protectedMode){$(".window-menu > .options .protectedMode span").attr("class","abs-menu-check")}else{$(".window-menu > .options .protectedMode span").attr("class","abs-menu-blank")}L.state.update();p.saveUI()}},dockable:{content:function(){return p.editorsDockable?"<span class='abs-menu-check'></span>dockable":"<span class='abs-menu-blank'></span>dockable"},click:function(){p.editorsDockable=!p.editorsDockable;if(p.editorsDockable){f.each(function(N,O){O.dockable=true});c.each(function(N,O){O.dockable=true});$(".window-menu > .options .dockable span").attr("class","abs-menu-check")}else{f.each(function(N,O){O.dockable=false});c.each(function(N,O){O.dockable=false});$(".window-menu > .options .dockable span").attr("class","abs-menu-blank")}p.saveUI()}}}}});C.$.addClass("window-menu").mouseenter(function(){clearTimeout(H)}).mouseleave(function(){H=setTimeout(function(){L.$menu.hide();L.menuClosed=true},500)});if(p.activeState&&p.activeState.editor){var J=parseInt(p.activeState.editor.left())+20;var I=parseInt(p.activeState.editor.top())+20;if(p.activeState.editor.isMaximized){E=true}}else{var J=220;var I=40}L.options($.extend({selector:this.window,title:"<div class='abs-sourceEditor-icon'></div>Empty document",taskbar:G,left:J,top:I,attachedWidth:600,dragstop:L.updateCodemirror,resizestop:L.updateCodemirror,minimize:L.updateCodemirror,unminimize:L.updateCodemirror,maximize:L.updateCodemirror,unmaximize:L.updateCodemirror,menu:C,openmenu:L.toggleMenu,focus:L.onfocus},B));if(E){L.maximize(true)}else{L.checkBounds()}L.load(D);L.open();L.focus()}A.prototype.close=function(){c.remove(this.file);this.state.destroy();for(var B in this.linkedPreviews){this.linkedPreviews[B].unbindWorkingDoc(this.file)}p.saveUI()};A.prototype.codemirrorFocus=function(){this.focus();p.docClick()};A.prototype.keyEvent=function(C,E){var B=C.sourceEditor,D=(E.keyCode!=undefined)?E.keyCode:(E.charCode!=undefined)?E.charCode:E.which;clearTimeout(B.keyEventTimer);B.state.saved=false;if(D==83&&E.ctrlKey){if(window.isIE){C.stop()}if(p.autosave){B.state.save()}else{B.saveContent(function(){B.state.save()})}E.preventDefault();return false}else{if(D==82&&E.ctrlKey){if(window.isIE){C.stop()}B.saveContent();E.preventDefault();return false}else{if(E.type=="keyup"&&p.autosave){B.keyEventTimer=setTimeout(function(){B.saveContent.call(B)},1000)}}}};A.prototype.load=function(E){var C=this,B=E.split(p.root);if(B.length>1){E=B[1]}B=E.split("/");for(var D=0;D<B.length-1;D++){if(B[D]!=""){C.currentPath+=B[D]+"/";C.returnPath+="../"}}B=E.split("?");E=B[0];if(E.charAt(0)!="/"){E="/"+E}if(C.currentDoc==undefined){C.currentDoc=uncacheSafe(E.substr(1))}else{C.lastDoc=C.currentDoc;C.currentDoc=uncacheSafe(E.substr(1));p.saveUI()}if(E.length<24){C.setTitle("<div class='abs-sourceEditor-icon'></div>Editing: /"+C.currentDoc)}else{C.setTitle("<div class='abs-sourceEditor-icon'></div>Editing: ... "+E.slice(-24))}C.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");C.file=E;C.fileType=getFileType(E);C.setSource(E);C.state=d.get(E);if(C.state==undefined){C.state=new t(E)}C.state.linkSourceEditor(C);C.state.onload(function(){var F={lineNumbers:true,tabMode:"shift",onKeyEvent:C.keyEvent};switch(C.fileType){case"js":fn="editScript";F.mode="javascript";k.each(function(G,H){k.get(G).bindWorkingDocs()});break;case"css":fn="editStylesheet";F.mode="css";k.each(function(G,H){k.get(G).bindWorkingDocs()});break;case"html":case"htm":case"xml":case"txt":fn="editSource";F.mode="htmlmixed";break;case"php":fn="editSource";F.mode="php";break}if(C.codemirror!=undefined){$(C.codemirror.wrapping).empty().remove()}C.codemirror=new CodeMirror(C.window,F);C.codemirror.sourceEditor=C;F=null;C.update();C.$handle.find(".open-menu").css("background","")})};A.prototype.onfocus=function(){var B=this;if(p.activeState!=B.state){p.activeState=B.state;if(p.activeState.isHTML){p.sourceOutline.load(B.file)}p.revisionManager.load(B.file)}p.updateGroupFocus(B)};A.prototype.saveContent=function(C){var B=this;B.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");B.state.execute({fn:"editSource",file:B.file,content:B.content,setContent:B.setContent,editor:B.codemirror,win:B.window},function(){if(B.state.isCSS){for(var D in B.linkedPreviews){B.linkedPreviews[D].state.update()}}B.$handle.find(".open-menu").css("background","")},C);B.content=B.codemirror.getValue()};A.prototype.setContent=function(B){this.content=B};A.prototype.setSource=function(C){var B=this;if(B.file!=undefined){c.remove(B.file)}B.file=C;c.put(B.file,B)};A.prototype.setZindex=function(){var B=this.state.winZindex.length;while(B--){if(this.state.winZindex[B]===this){this.state.winZindex.splice(B,1)}}this.state.winZindex[this.state.winZindex.length]=this};A.prototype.toggleMenu=function(){var B=this;if(B.menuClosed){B.$menu.show();B.menuClosed=false}else{B.$menu.hide();B.menuClosed=true}};A.prototype.update=function(){var B=this;B.content=B.state.html("clean");B.codemirror.setValue(B.content)};A.prototype.updateCodemirror=function(){this.codemirror.refresh();p.saveUI()};return A})();this.SourceEditor=n;var g=(function(){A.Inherits(Window);function A(E,C,F){F=F||p.desktop;var D=this,B;D.elementHash=new Hashtable();D.name="sourceOutline";D.file;D.closeAttributeEditor=function(){};D.isHidden=true;D.window=$("<div/>").attr({id:"absOverview",style:"display: none;"}).addClass("window abs-sourceOutline-ui abs-ui").appendTo(F),D.$wrapper=$("<div/>").attr("id","absOverviewWrapper").addClass("content abs-ui").appendTo(D.window);D.wrapper=D.$wrapper.get(0);D.menuClosed=true;var G=new Menu({close:{content:'<span class="abs-menu-delete"></span>Close',click:function(){D.close()}},insert:"<hr />",options:{content:'<span class="abs-menu-options"></span>Options',styles:"color: gray;"}});G.$.addClass("window-menu").mouseenter(function(){clearTimeout(menuTimer)}).mouseleave(function(){menuTimer=setTimeout(function(){D.$menu.hide();D.menuClosed=true},500)});D.options({selector:D.window,title:"<div class='abs-overview-icon'></div>Outline",taskbar:C,top:20,dragstop:D.saveUI,resizestop:D.saveUI,minimize:D.saveUI,unminimize:D.saveUI,maximize:false,menu:G,openmenu:D.toggleMenu,focus:D.onfocus});if(E!=undefined){D.load(E)}D.focus()}A.prototype.clear=function(){this.state=undefined;this.$wrapper.unbind().empty();this.$.css("display","none");this.isHidden=true};A.prototype.load=function(E){var D=this,B=E.split(p.root);if(B.length>1){E=B[1]}B=E.split("/");for(var C=0;C<B.length-1;C++){if(B[C]!=""){D.currentPath+=B[C]+"/";D.returnPath+="../"}}B=E.split("?");E=B[0];if(E.charAt(0)!="/"){E="/"+E}if(D.currentDoc==undefined){D.currentDoc=uncacheSafe(E.substr(1))}else{D.lastDoc=D.currentDoc;D.currentDoc=uncacheSafe(E.substr(1));p.saveUI()}D.state=d.get(E);if(D.state!=undefined){D.state.onload(function(){D.file=E;D.update();D.$.css("display","block");D.isHidden=false;if(D.isAttached){var F=window.maximizedWindows.length;while(F--){window.maximizedWindows[F].maximize(true)}}})}};A.prototype.oncontextmenu=function(E){var B=this,F,C;E=window.event||E;if(E.stopPropagation){E.stopPropagation()}else{E.cancelBubble=true}var D=E.target!=null?E.target:E.srcElement;D=$(D).closest("div").get(0);D=B.elementHash.get(D);if(E.pageX!=undefined){F=E.pageX;C=E.pageY}else{F=E.clientX;C=E.clientY}if(p.contextMenu.element(D,B.state)){if(C+p.contextMenu.$.outerHeight()>$window.height()){C=$window.height()-p.contextMenu.$.outerHeight()}p.contextMenu.$.css({display:"none",left:F+"px",top:C+"px"}).fadeIn("fast")}E.preventDefault();return false};A.prototype.onfocus=function(){var B=this;p.updateGroupFocus(B)};A.prototype.saveUI=function(){p.saveUI()};A.prototype.setZindex=function(){var B=p.groupZindex.length;while(B--){if(p.groupZindex[B]===this){p.groupZindex.splice(B,1)}}p.groupZindex[p.groupZindex.length]=this};A.prototype.stopBubble=function(B){B=window.event||B;if(B.stopPropagation){B.stopPropagation()}else{B.cancelBubble=true}};A.prototype.toggleMenu=function(){var B=this;if(B.menuClosed){B.$menu.show();B.menuClosed=false}else{B.$menu.hide();B.menuClosed=true}};A.prototype.update=function(){var D=this,E=0,C=document.createDocumentFragment(),F=document.createElement("div");if(D.state.isHTML){D.$handle.find(".open-menu").css("background","transparent url(styles/images/ajax-loader.gif) no-repeat center");F.setAttribute("class","absOvItem");F.setAttribute("style","margin-left: 0px;");F.innerHTML="&lt;HTML&gt;";C.appendChild(F);var B=document.createElement("div");B.setAttribute("class","abs-child-wrapper");C.appendChild(B);D.$wrapper.find("*").each(function(){$(this).unbind().get(0).oncontextmenu=null});D.traverseDOM(D.state.doc.firstChild,B,1);D.$wrapper.unbind().empty().mouseleave(function(){if(D.state.preview){D.state.preview.$selector.dequeue().fadeOut("fast")}}).bind("contextmenu",function(G){D.oncontextmenu(G)});D.wrapper.appendChild(C);D.$handle.find(".open-menu").css("background","")}else{D.clear()}C=null;F=null;childwrapper=null};A.prototype.traverseDOM=function(C,D,E){var B=this;setTimeout(function(){E++;$(C).children().each(function(){var P=$(this),Q=this,H,N,L,S="",K="",T="";if(P.hasClass("abs-ui")){return}var G=document.createElement("div");G.setAttribute("style","position: relative;");G.setAttribute("class","absOvItem");var J=B.state.elementHash.get(Q);B.elementHash.put(J,G);B.elementHash.put(G,J);if(this.src!=undefined){var M=this.src.split("/");S="<span style='color: #ff9900; margin-left: 5px; font-size: 10px; font-weight: bold;'>"+uncacheSafe(M[M.length-1])+"</span>"}else{if(this.href!=undefined){var M=this.href.split("/");S="<span style='color: #ff9900; margin-left: 5px; font-size: 10px; font-weight: bold;'>"+uncacheSafe(M[M.length-1])+"</span>"}}if(P.css("display")=="none"||P.css("visibility")=="hidden"){nodeName="<span style='color: gray;'>&lt;"+this.nodeName+"&gt;</span>"}else{nodeName="&lt;"+this.nodeName+"&gt;"}if(this.nodeName=="TITLE"){T="<span style='color: cfcfcf; margin-left: 5px; font-size: 10px; font-weight: bold;'>"+this.innerHTML+"</span>"}G.innerHTML=nodeName+K+T;if(P.attr("src")!=undefined||P.attr("href")!=undefined){var O=(this.src!=undefined)?"src":"href";var M=P.attr(O).split("/");S=document.createElement("span");S.setAttribute("style","color: #F5D0A9; margin-left: 5px; font-size: 10px; font-weight: bold;");S.innerHTML=uncacheSafe(M[M.length-1]);var Q=this;G.appendChild(S);S=null}if(P.attr("id")!=""){H=document.createElement("span");H.setAttribute("style","color: #F5A9A9; margin-left: 5px; font-size: 10px; font-weight: bold;");H.innerHTML="#"+$(this).attr("id");G.appendChild(H);H=null}if(P.attr("class")!=""){N=document.createElement("span");N.setAttribute("style","color: #A9BCF5; margin-left: 5px; font-size: 10px; font-weight: bold;");N.innerHTML="."+P.attr("class").replace(/([\s\S]*?)abs-administrable-element([\s\S]*?)/g,"");G.appendChild(N);N=null}if(P.attr("name")!=undefined){L=document.createElement("span");L.setAttribute("style","color: #BCF5A9; margin-left: 5px; font-size: 10px; font-weight: bold;");L.innerHTML=P.attr("name");G.appendChild(L);L=null}$(D).append(G);var I=this;var J=B.state.elementHash.get(I);$(G).mouseenter(function(){if(B.state.preview&&!B.isDragging&&!$(J).is("body")){var U=(navigator.userAgent.indexOf("Firefox")!=-1)?$(B.state.frame.contentWindow.document).find("html,body").scrollTop():$(B.state.frame.contentWindow.document).find("body").scrollTop();B.state.preview.$selector.dequeue().css({display:"block"}).animate({top:$(J).offset().top-U,left:$(J).offset().left,width:$(J).outerWidth(),height:$(J).outerHeight(),opacity:0.5},"fast")}else{B.state.preview.$selector.dequeue().fadeOut("fast")}});if(P.children().length>0){var F=$("<div/>").attr("class","abs-child-wrapper").css("display","block");$(D).append(F);var R=$("<img/>").attr("src","styles/images/hidechildren.png").prependTo(G);if($(I).is("p, li, td, dd")){R.attr("src","styles/images/showchildren.png");F.css("display","none")}$(G).css("padding-left",(E-1)*10).click(function(){if(F.css("display")=="none"){F.slideDown("fast");R.attr("src","styles/images/hidechildren.png")}else{F.slideUp("fast");R.attr("src","styles/images/showchildren.png")}});B.traverseDOM(this,F,E)}else{$(G).css("padding-left",((E-1)*10)+10)}if($(this).hasClass("abs-administrable-element")){$(G).css("background-color","#FFEEEE").prepend(document.createElement("div")).find("div").html("administrable").css({fontSize:10,color:"#666666",textAlign:"right",marginRight:5});$(F).css("background-color","#FFEEEE")}G=null})},0)};return A})();this.getRoot(function(){p.createBlackout();p.createDesktop();p.createTaskbar();p.contextMenu=new w();p.fileManager=new i();p.revisionManager=new m();p.sourceOutline=new g();p.getUI();$("#absSplash").empty().remove()})}a.prototype.copyFile=function(b,c,f){var d="fn=copy&src="+b+"&dest="+c;$.ajax({type:"POST",url:"scripts/server/files.php",data:d,success:f})};a.prototype.createBlackout=function(){$(this.parent).append('<div id="absBlackout" class="abs-ui" style="opacity: 0; display: none; z-index: 0;"></div>')};a.prototype.createDesktop=function(){var b=this;b.desktop=document.createElement("div");b.desktop.setAttribute("id","absDesktop");b.desktop.setAttribute("class","abs-ui abs-desktop");$(b.desktop).css({position:"absolute",width:$(b.parent).width(),height:$(b.parent).height()});b.parent.appendChild(b.desktop)};a.prototype.createDir=function(b,f){var c=this,d="fn=dset&path="+b;$.ajax({type:"POST",url:"scripts/server/files.php",data:d,success:function(g){if(g=="Warning: You must be logged in to edit files."){c.restoreSession()}else{if(typeof f=="function"){f(g)}}}})};a.prototype.createRevDir=function(f,b,g){var c=this,d="fn=revdset&path="+b+"&name="+f;$.ajax({type:"POST",url:"scripts/server/files.php",data:d,success:function(h){if(h=="Warning: You must be logged in to edit files."){c.restoreSession()}else{if(typeof g=="function"){g(h)}}}})};a.prototype.createTaskbar=function(){var m=this,g;var i=new Menu({newDoc:{content:"New Document",click:function(){new Popup({title:"Name Document",id:"nameFilePopup",content:'<form id=\'nameFileForm\'><fieldset style="margin: 10px;"><label for="nameFile">Enter a name for your new file:</label><input class="text_input" name="nameFile" id="nameFile" type="text" /><select id="fileExtensionSelect"><option value="css">.css</option><option value="html">.html</option><option value="js">.js</option><option value="pl">.pl</option><option value="php">.php</option><option value="txt">.txt</option><option value="xml">.xml</option></select><input class="button" id="nameFileSubmit" type="submit" value="submit" /></fieldset></form>',position:"average"});$("#nameFilePopup").find("form").submit(r).find("input")[0].focus();document.getElementById("nameFile").onkeyup=q;i.$.slideUp();function r(){var t=document.getElementById("nameFile").value;newNameArr=t.split(".");if(newNameArr.length==1){newExt=document.getElementById("fileExtensionSelect").value;t=newNameArr[0]+"."+newExt}else{newExt=newNameArr[1]}switch(newExt.toLowerCase()){case"html":case"htm":var u='<!doctype HTML>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <title>title</title>\n  </head>\n  <body>\n  </body>\n</html>';break;default:var u="";break}m.setFileContents("/"+t,u,function(){m.fileManager.update()},false);$("#nameFilePopup").fadeOut("fast",function(){$(this).empty().remove()});return false}function q(){var t=document.getElementById("nameFile").value;newNameArr=t.split(".");if(newNameArr.length>1){document.getElementById("fileExtensionSelect").disabled="disabled"}else{document.getElementById("fileExtensionSelect").disabled=undefined}}}},saveDoc:{content:"Save Document",click:function(){e=window.event||e;if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}m.activeState.save();i.$.slideUp()}},hr1:"<hr/>",browser:{content:"Browser"},hr2:"<hr/>",options:{content:"Options",styles:"color: gray;"},hr3:"<hr/>",logout:{content:"Logout",click:function(){e=window.event||e;if(e.stopPropagation){e.stopPropagation()}else{e.cancelBubble=true}var q=window.location;window.location.href=q.href+"?logout"}}});i.$.addClass("abs-dropup-wrapper");var d=document.createElement("div");d.setAttribute("class","abs-options-menu");d.setAttribute("title","Abstraction Options");d.innerHTML="<div class='abs-taskbarMenu-icon'></div>";d.appendChild(i.fragment);$(d).bind("click",function(){i.$.slideToggle()}).bind("mouseout",function(){function q(){i.$.slideUp()}g=setTimeout(q,1000)}).bind("mouseover",function(){clearTimeout(g)});var f=document.createElement("div");f.setAttribute("class","abs-all-windows");f.setAttribute("title","Toggle Abstraction UI");f.innerHTML="<div class='abs-allWindows-icon'></div>";$(f).bind("click",function(){if(m.uiHidden){$(".window:not(.abs-documentPreview-ui)").css("display","block")}else{$(".window:not(.abs-documentPreview-ui)").css("display","none")}m.uiHidden=!m.uiHidden;var q=window.maximizedWindows.length;while(q--){window.maximizedWindows[q].maximize(true)}});var h=document.createElement("div");h.setAttribute("title","Database Manager");h.innerHTML="<div class='abs-databaseManager-icon'></div>";$(h).hover(function(){m.databaseManager.$.addClass("ui-window-highlight")},function(){m.databaseManager.$.removeClass("ui-window-highlight")});$(h).click(function(){if(m.databaseManager.isClosed){m.databaseManager.open();m.databaseManager.focus()}else{if(m.databaseManager===window.activeWindow||m.databaseManager.isMinimized){m.databaseManager.minToggle()}else{m.databaseManager.focus()}}});var b=document.createElement("div");b.setAttribute("title","File Manager");b.innerHTML="<div class='abs-fileManager-icon'></div>";$(b).hover(function(){m.fileManager.$.addClass("ui-window-highlight")},function(){m.fileManager.$.removeClass("ui-window-highlight")});$(b).click(function(){if(m.fileManager.isClosed){m.fileManager.open();m.fileManager.focus()}else{if(m.fileManager===window.activeWindow||m.fileManager.isMinimized){m.fileManager.minToggle()}else{m.fileManager.focus()}}});var n=document.createElement("div");n.setAttribute("title","Revision Manager");n.innerHTML="<div class='abs-revisionManager-icon'></div>";$(n).hover(function(){m.revisionManager.$.addClass("ui-window-highlight")},function(){m.revisionManager.$.removeClass("ui-window-highlight")});$(n).click(function(){if(m.revisionManager.isClosed){m.revisionManager.open();m.revisionManager.focus()}else{if(m.revisionManager===window.activeWindow||m.revisionManager.isMinimized){m.revisionManager.minToggle()}else{m.revisionManager.focus()}}});var k=document.createElement("div");k.setAttribute("title","Document Outline");k.innerHTML="<div class='abs-overview-icon'></div>";$(k).hover(function(){m.sourceOutline.$.addClass("ui-window-highlight")},function(){m.sourceOutline.$.removeClass("ui-window-highlight")});$(k).click(function(){if(m.sourceOutline.isClosed){m.sourceOutline.open();m.sourceOutline.focus()}else{if(m.sourceOutline===window.activeWindow||m.sourceOutline.isMinimized){m.sourceOutline.minToggle()}else{m.sourceOutline.focus()}}});var p=document.createElement("div");p.setAttribute("class","abs-options");p.appendChild(d);p.appendChild(f);p.appendChild(b);p.appendChild(n);p.appendChild(k);var o=document.createElement("div");o.setAttribute("class","abs-taskbar");$(o).bind("contextmenu",function(t){var u,q;t=window.event||t;if(t.stopPropagation){t.stopPropagation()}else{t.cancelBubble=true}var r=t.target!=null?t.target:t.srcElement;r=$(r).closest("span").data("win");if(m.contextMenu.taskbar(r)){if(t.pageX!=undefined){u=t.pageX;q=$window.height()-m.contextMenu.$.outerHeight()-25}else{u=t.clientX;q=$window.height()-m.contextMenu.$.outerHeight()-25}if(q+m.contextMenu.$.outerHeight()>$window.height()){q=$window.height()-m.contextMenu.$.outerHeight()}m.contextMenu.$.css({display:"none",left:u+"px",top:q+"px"}).fadeIn("fast")}t.preventDefault();return false});var c=document.createElement("div");c.setAttribute("class","abs-taskbar-wrapper abs-ui");c.appendChild(p);c.appendChild(o);document.body.appendChild(c);m.taskbar=new Taskbar(o)};a.prototype.deleteFile=function(b,f){var c=this,d="fn=del&src="+b;$.ajax({type:"POST",url:"scripts/server/files.php",data:d,success:function(g){if(g=="Warning: You must be logged in to edit files."){c.restoreSession()}else{if(typeof f=="function"){f(g,b)}}}})};a.prototype.docClick=function(b){this.contextMenu.close()};a.prototype.getDirContents=function(b,f){var c=this,d="fn=dir&path="+b;$.ajax({type:"POST",url:"scripts/server/files.php",data:d,success:function(g){if(g=="Warning: You must be logged in to edit files."){c.restoreSession()}else{if(typeof f=="function"){f(g)}}}})};a.prototype.getFileContents=function(c,f){var d=this,b={type:"POST",url:"scripts/server/files.php",data:"fn=get&url="+encodeURIComponent(c),success:function(g){if(g=="Warning: You must be logged in to edit files."){d.restoreSession()}else{if(typeof f=="function"){f(g)}}}};$.ajax(b)};a.prototype.getRoot=function(c){var b=this;$.ajax({type:"POST",url:"scripts/server/files.php",data:"fn=root",success:function(d){b.root=d;if(typeof c=="function"){c(d)}}})};a.prototype.getUI=function(){var b=this;b.getFileContents("/builder/ui.txt",function(h){h=h.split("|!BREAK!|");var g={databaseManager:b.databaseManager,fileManager:b.fileManager,revisionManager:b.revisionManager,sourceOutline:b.sourceOutline};b.autosave=(h.splice(0,1)=="true")?true:false;b.protectedMode=(h.splice(0,1)=="true")?true:false;b.editorsDockable=(h.splice(0,1)=="true")?true:false;b.previewsDockable=(h.splice(0,1)=="true")?true:false;var c=h.length-1;while(c--){var d=h[c].split(","),k=g[d[0]];if(k){k.options({left:d[1],top:d[2],width:d[3],height:d[4],minimized:d[5],maximized:d[6]});if(k.name=="fileManager"){k.preview=(d[7]=="false")?false:true;if(k.preview){k.$.find(".previewToggle").find("span").attr("class","abs-menu-check")}else{k.$.find(".previewToggle").find("span").attr("class","abs-menu-blank")}k.update()}k.checkBounds();k.focus()}else{switch(d[0]){case"sourceEditor":var k=new b.SourceEditor(d[7],b.taskbar,{left:d[1],top:d[2],width:d[3],height:d[4],minimized:d[5],maximized:d[6]});if(k.isAttached){var f=window.maximizedWindows.length;while(f--){window.maximizedWindows[f].maximize(true)}}k=null;break;case"documentPreview":var k=new b.DocumentPreview(d[7],b.taskbar,{left:d[1],top:d[2],width:d[3],height:d[4],minimized:d[5],maximized:d[6]});k=null;break;default:break}}}b.uiLoaded=true})};a.prototype.renameFile=function(b,m){var f=this,g=b.split("/"),k="";for(var d=0;d<g.length-1;d++){k+=g[d]+"/"}g=g[g.length-1];var c='<form><fieldset style="margin: 10px;"><label for="renameFile">Enter a new name for your file:</label><input class="text_input" name="renameFile" id="renameFile" type="text" value="'+g+'" /><input class="button" id="renameFileSubmit" type="submit" value="submit" /></fieldset></form>';new Popup({id:"renameFilePopup",content:c,title:"Rename Document",position:"average"});$("#renameFilePopup").find("form").submit(h).find("input")[0].focus();function h(){var i=document.getElementById("renameFile").value;var n="fn=rename&src="+b+"&name="+i;$.ajax({type:"POST",url:"scripts/server/files.php",data:n,success:function(o){if(o=="Warning: You must be logged in to edit files."){f.restoreSession()}else{if(typeof m=="function"){m(o,i,k)}}}});$("#renameFilePopup").fadeOut("fast",function(){$(this).empty().remove()});return false}};a.prototype.renameRevision=function(b,g){var d=this,c='<form><fieldset style="margin: 10px;"><label for="renameRevision">Enter a new name for your revision:</label><input class="text_input" name="renameRevision" id="renameRevision" type="text" /><input class="button" id="renameRevisionSubmit" type="submit" value="submit" /></fieldset></form>';new Popup({id:"renameRevisionPopup",content:c,title:"Rename Revision",position:"average"});$("#renameRevisionPopup").find("form").submit(f).find("input")[0].focus();function f(){var h=document.getElementById("renameRevision").value;var i="fn=renamerev&src="+b+"&name="+h;$.ajax({type:"POST",url:"scripts/server/files.php",data:i,success:function(k){if(k=="Warning: You must be logged in to edit files."){d.restoreSession()}else{if(typeof g=="function"){g(k,h)}}}});$("#renameRevisionPopup").fadeOut("fast",function(){$(this).empty().remove()});return false}};a.prototype.restoreSession=function(d){d=d||function(){};var c='<div class="abs-login-wrapper"><div class="abs-login-bg"></div><div class="abs-login-logo"></div><p>You have been logged out due to inactivity.  Please log in again:</p><form><fieldset><label for="loginUsername">Username</label><input id="loginUsername" name="loginUsername" type="text" /><br /><label for="loginPassword">Password</label><input id="loginPassword" name="loginPassword" type="password" /><input id="loginSubmit" name="loginSubmit" type="submit" value="Login" /></fieldset></form></div>';new Popup({id:"restoreSessionPopup",content:c,title:"Please log back in",position:"center"});$("#restoreSessionPopup").find("form").submit(b).find("input")[0].focus();function b(){var h=document.getElementById("loginUsername").value,f=document.getElementById("loginPassword").value;var g="fn=relog&user="+h+"&pass="+f;$.ajax({type:"POST",url:"scripts/server/files.php",data:g,success:d});$("#restoreSessionPopup").fadeOut("fast",function(){$(this).empty().remove()});return false}};a.prototype.saveUI=function(){if(this.uiLoaded){var f=this,c=f.autosave+"|!BREAK!|"+f.protectedMode+"|!BREAK!|"+f.editorsDockable+"|!BREAK!|"+f.previewsDockable+"|!BREAK!|",d=f.groupZindex.length;while(d--){var h=f.groupZindex[d];if(h.name=="documentState"){var b=h.winZindex.length;while(b--){var g=h.winZindex[b];c+=g.name+","+g.left()+","+g.top()+","+g.width()+","+g.height()+","+g.isMinimized+","+g.isMaximized+","+g.file+"|!BREAK!|"}}else{c+=h.name+","+h.left()+","+h.top()+","+h.width()+","+h.height()+","+h.isMinimized+","+h.isMaximized+","+h.preview+"|!BREAK!|"}}f.setFileContents("/builder/ui.txt",c,function(){})}};a.prototype.setFileContents=function(c,f,h,b){var d=this;if(b==false){var g="fn=lset&url="+c+"&content="+encodeURIComponent(f)}else{var g="fn=gset&url="+c+"&content="+encodeURIComponent(f)}$.ajax({type:"POST",url:"scripts/server/files.php",data:g,success:function(i){if(i=="Warning: You must be logged in to edit files."){d.restoreSession()}else{if(typeof h=="function"){h(i)}}}})};a.prototype.updateGroupFocus=function(f){var c,b,d,g,h=0;if(f!=undefined){f.setZindex()}if(f.state!=undefined&&f!==this.sourceOutline&&f!==this.revisionManager){f.state.setZindex()}b=this.groupZindex.length;for(c=0;c<b;c++){h=((c+1)*100)*10;g=this.groupZindex[c];if(g.winZindex!=undefined){d=g.winZindex.length;for(j=0;j<d;j++){h+=(j+1);g.winZindex[j].$.css("z-index",h)}}else{g.$.css("z-index",h)}}this.saveUI()};return a})();function isDir(a){a=a.split(".");return(a.length==1)}function getFileType(a){a=a.split("/");a=a[a.length-1];a=a.split("?",2);a=a[0].split(".");if(a.length==1){return"dir"}else{return a[a.length-1].toLowerCase()}}function cacheSafePath(a){var b=new Date().getTime();a=a.split("?",2);return(a.length==1)?a[0]+"?cacheControl="+b:a[0]+"?"+a[1]+"&cacheControl="+b}function uncacheSafe(a){if(a!=undefined){a=a.split("?cacheControl",2);if(a.length==1){a=a[0].split("&cacheControl",2)}return a[0]}else{return false}}function text2html(a){return a.replace(/(\n\r|\n|\r)/g,"<br />\n").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;")}function getKeys(c){var b=[];for(var a in c){b.push(a)}return b}function dateSortAsc(b,a){if(b>a){return 1}if(b<a){return -1}return 0}function dateSortDesc(b,a){if(b>a){return -1}if(b<a){return 1}return 0}jQuery.fn.cleanWhitespace=function(){this.contents().filter(function(){if(this.nodeType!=3&&this.nodeName!="IFRAME"){$(this).cleanWhitespace();return false}else{return !/\S/.test(this.nodeValue)}}).remove();return this};var cleanDepth=1;jQuery.fn.cleanMarkup=function(){var a;this.contents().each(function(){if(this.nodeType==1){if(a!=3){var b="\n",c=cleanDepth;while(c--){b+="  "}$(this).before(document.createTextNode(b));if(this.nodeName!="IFRAME"){cleanDepth++;$(this).cleanMarkup();cleanDepth--;if($(this).contents().last().get(0)!=undefined&&$(this).contents().last().get(0).nodeType==1){$(this).contents().last().after(document.createTextNode(b))}}}}a=this.nodeType});a=null;return this};